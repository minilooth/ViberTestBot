2020-12-23 00:45:15.754  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:45:18.952  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:45:18.955  WARN 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:45:18.960  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:45:19.925  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:45:20.102  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 151ms. Found 10 JPA repository interfaces.
2020-12-23 00:45:20.587  INFO 13708 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:45:20.646  INFO 13708 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:45:22.190  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:45:22.247  INFO 13708 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:45:22.248  INFO 13708 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:45:22.552  INFO 13708 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:45:22.552  INFO 13708 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3553 ms
2020-12-23 00:45:23.065  INFO 13708 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:45:23.199  INFO 13708 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 00:45:23.564  INFO 13708 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 00:45:23.695  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 00:45:24.704  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 00:45:24.813  INFO 13708 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:45:26.394  INFO 13708 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:45:26.403  INFO 13708 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:45:26.460  INFO 13708 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:45:27.612  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:45:27.614  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:45:27.644  WARN 13708 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:45:27.647  WARN 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:45:27.648  INFO 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:45:27.655  WARN 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:45:27.664  INFO 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:45:27.738  WARN 13708 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:45:28.849  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:45:29.258  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 15.533 seconds (JVM running for 16.996)
2020-12-23 00:45:30.320  INFO 13708 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:45:30.322  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:45:30.331  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2020-12-23 00:45:30.551  INFO 13708 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:45:30.559  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:45:41.678  INFO 13708 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:45:41.965  INFO 13708 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:45:43.198  INFO 13708 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:45:43.346  INFO 13708 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:45:44.308 ERROR 13708 --- [http-nio-5000-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

java.io.FileNotFoundException: .\files\keyboard_icons\integrations.png
	at org.springframework.core.io.FileSystemResource.getInputStream(FileSystemResource.java:189) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.controllers.FileController.getIcon(FileController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.doHead(HttpServlet.java:240) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:649) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

2020-12-23 00:46:32.472  INFO 13708 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:46:32.473  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:46:35.473  WARN 13708 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:46:35.476  INFO 13708 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:46:35.496  INFO 13708 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 00:46:35.541  INFO 13708 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 00:46:36.536  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:46:38.545  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:46:38.546  WARN 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:46:38.550  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:46:38.900  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:46:38.969  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 67ms. Found 10 JPA repository interfaces.
2020-12-23 00:46:39.150  INFO 13708 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:46:39.172  INFO 13708 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:46:39.598  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:46:39.601  INFO 13708 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:46:39.602  INFO 13708 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:46:39.690  INFO 13708 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:46:39.690  INFO 13708 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1126 ms
2020-12-23 00:46:39.904  INFO 13708 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:46:39.920  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 00:46:39.969  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 00:46:39.974  INFO 13708 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:46:40.837  INFO 13708 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:46:40.838  INFO 13708 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:46:40.853  INFO 13708 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:46:41.375  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:46:41.377  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:46:41.384  WARN 13708 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:46:41.385  WARN 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:46:41.386  INFO 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:46:41.417  WARN 13708 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:46:41.952  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:46:42.306  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.6 seconds (JVM running for 90.044)
2020-12-23 00:46:42.310  INFO 13708 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 00:46:43.144  INFO 13708 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:46:43.146  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:46:43.152  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 00:46:43.304  INFO 13708 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:46:43.319  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:46:54.692  INFO 13708 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:46:54.693  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:46:57.694  WARN 13708 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:46:57.697  INFO 13708 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:46:57.713  INFO 13708 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 00:46:57.730  INFO 13708 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 00:46:58.681  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:47:00.697  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:47:00.697  WARN 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:47:00.699  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:47:01.100  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:47:01.172  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71ms. Found 10 JPA repository interfaces.
2020-12-23 00:47:01.315  INFO 13708 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:47:01.329  INFO 13708 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:47:01.485  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:47:01.486  INFO 13708 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:47:01.487  INFO 13708 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:47:01.553  INFO 13708 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:47:01.554  INFO 13708 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 835 ms
2020-12-23 00:47:01.645  INFO 13708 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:47:01.656  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 00:47:01.684  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 00:47:01.688  INFO 13708 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:47:02.861  INFO 13708 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:47:02.861  INFO 13708 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:47:02.871  INFO 13708 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:47:03.434  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:47:03.435  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:47:03.443  WARN 13708 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:47:03.450  WARN 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:47:03.451  INFO 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:47:03.495  WARN 13708 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:47:04.133  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:47:04.474  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.609 seconds (JVM running for 112.212)
2020-12-23 00:47:04.478  INFO 13708 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 00:47:05.253  INFO 13708 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:47:05.255  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:47:05.263  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2020-12-23 00:47:05.410  INFO 13708 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:47:05.414  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:47:28.067  INFO 13708 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:47:28.068  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:47:31.069  WARN 13708 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:47:31.071  INFO 13708 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:47:31.086  INFO 13708 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 00:47:31.103  INFO 13708 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 00:47:31.879  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:47:32.481 ERROR 13708 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$377b3181.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 00:47:33.897  INFO 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:47:33.898  WARN 13708 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:47:33.900  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:47:34.226  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:47:34.288  INFO 13708 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60ms. Found 10 JPA repository interfaces.
2020-12-23 00:47:34.383  INFO 13708 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:47:34.394  INFO 13708 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:47:34.539  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:47:34.540  INFO 13708 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:47:34.541  INFO 13708 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:47:34.622  INFO 13708 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:47:34.623  INFO 13708 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 705 ms
2020-12-23 00:47:34.701  INFO 13708 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:47:34.709  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 00:47:34.725  INFO 13708 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 00:47:34.729  INFO 13708 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:47:35.163  INFO 13708 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:47:35.163  INFO 13708 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:47:35.174  INFO 13708 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:47:35.518  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:47:35.519  INFO 13708 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:47:35.524  WARN 13708 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:47:35.530  WARN 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:47:35.531  INFO 13708 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:47:35.565  WARN 13708 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:47:36.026  INFO 13708 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:47:36.349  INFO 13708 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.126 seconds (JVM running for 144.087)
2020-12-23 00:47:36.351  INFO 13708 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 00:47:37.132  INFO 13708 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:47:37.132  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:47:37.137  INFO 13708 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 00:47:37.280  INFO 13708 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:47:37.284  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:47:40.707  INFO 13708 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:47:40.865  INFO 13708 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:47:41.553 ERROR 13708 --- [http-nio-5000-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

java.io.FileNotFoundException: .\files\keyboard_icons\integrations.png
	at org.springframework.core.io.FileSystemResource.getInputStream(FileSystemResource.java:189) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.controllers.FileController.getIcon(FileController.java:57) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.doHead(HttpServlet.java:240) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:649) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

2020-12-23 00:47:54.701 ERROR 13708 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$377b3181.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 00:48:06.170  INFO 13708 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:48:06.304  INFO 13708 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:48:07.529  INFO 13708 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:48:07.662  INFO 13708 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:48:28.075 ERROR 13708 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$377b3181.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 00:50:43.918  INFO 13708 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received ConversationStartedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:50:48.957  INFO 13708 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:50:49.652  INFO 13708 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:51:36.512  INFO 13708 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:51:36.512  INFO 13708 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:51:39.514  WARN 13708 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:51:39.516  INFO 13708 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:51:39.527  INFO 13708 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2020-12-23 00:51:39.539  INFO 13708 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2020-12-23 00:52:28.022  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:52:30.139  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:52:30.141  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:52:30.146  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:52:30.803  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:52:30.917  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 104ms. Found 10 JPA repository interfaces.
2020-12-23 00:52:31.274  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:52:31.332  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:52:32.186  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:52:32.199  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:52:32.202  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:52:32.404  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:52:32.405  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2215 ms
2020-12-23 00:52:32.648  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:52:32.697  INFO 16700 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 00:52:32.951  INFO 16700 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 00:52:33.123  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 00:52:33.405  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 00:52:33.422  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:52:35.295  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:52:35.304  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:52:35.340  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:52:36.209  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:52:36.210  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:52:36.229  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:52:36.241  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:52:36.242  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:52:36.248  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:52:36.258  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:52:36.338  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:52:37.090  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:52:37.480  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.121 seconds (JVM running for 11.879)
2020-12-23 00:52:38.403  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:52:38.405  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:52:38.435  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms
2020-12-23 00:52:38.642  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:52:38.652  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:52:42.465  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:52:42.723  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:53:05.775  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:53:05.908  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:53:35.032  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:53:35.167  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:53:43.453  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:53:43.589  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:53:48.353  INFO 16700 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:53:48.355  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:53:51.354  WARN 16700 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:53:51.360  INFO 16700 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:53:51.366  INFO 16700 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 00:53:51.383  INFO 16700 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 00:53:52.259  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:53:54.267  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:53:54.267  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:53:54.271  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:53:54.617  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:53:54.680  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62ms. Found 10 JPA repository interfaces.
2020-12-23 00:53:54.799  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:53:54.811  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:53:54.952  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:53:54.953  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:53:54.954  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:53:55.005  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:53:55.006  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 723 ms
2020-12-23 00:53:55.094  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:53:55.102  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 00:53:55.127  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 00:53:55.131  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:53:55.577  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:53:55.578  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:53:55.589  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:53:55.957  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:53:55.958  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:53:55.966  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:53:55.971  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:53:55.972  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:53:56.000  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:53:56.452  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:53:56.783  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.283 seconds (JVM running for 91.183)
2020-12-23 00:53:56.786  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 00:53:57.694 ERROR 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@34f9650c > HttpResponse[HTTP/1.1 503 Service Unavailable]@1b8be6fd] null
2020-12-23 00:53:57.699  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:53:57.823  INFO 16700 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:53:57.824  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 00:54:00.825  WARN 16700 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 00:54:00.826  INFO 16700 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:54:00.839  INFO 16700 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 00:54:00.851  INFO 16700 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 00:54:01.619  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 00:54:03.632  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 00:54:03.633  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 00:54:03.637  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 00:54:04.152  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 00:54:04.216  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 63ms. Found 10 JPA repository interfaces.
2020-12-23 00:54:04.318  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 00:54:04.327  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 00:54:04.458  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 00:54:04.459  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 00:54:04.460  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 00:54:04.506  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 00:54:04.507  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 858 ms
2020-12-23 00:54:04.594  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 00:54:04.602  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 00:54:04.628  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 00:54:04.631  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 00:54:05.078  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 00:54:05.079  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 00:54:05.088  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 00:54:05.431  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 00:54:05.432  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 00:54:05.438  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 00:54:05.444  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 00:54:05.445  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 00:54:05.477  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 00:54:05.933  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 00:54:06.263  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.304 seconds (JVM running for 100.663)
2020-12-23 00:54:06.266  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 00:54:06.987  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 00:54:06.989  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 00:54:06.993  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 00:54:07.137  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 00:54:07.142  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 00:54:12.643  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 00:54:12.819  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 00:54:48.369 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$4830c4f2.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 00:54:57.832 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$4830c4f2.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 01:03:45.911  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:03:46.617  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:12.265  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:12.957  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:14.592  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:14.734  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:27.843  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:27.982  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:30.431  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:30.570  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:34.423  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:34.596  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:07:36.845  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:07:36.976  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:08:47.528  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:08:48.193  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:17:46.820  INFO 16700 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 01:17:46.821  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 01:17:49.824  WARN 16700 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 01:17:49.826  INFO 16700 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 01:17:49.840  INFO 16700 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 01:17:49.857  INFO 16700 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 01:28:20.819  INFO 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 01:28:22.990  INFO 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 01:28:22.991  WARN 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 01:28:23.010  INFO 10724 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 01:28:24.336  INFO 10724 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 01:28:24.544  INFO 10724 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 196ms. Found 10 JPA repository interfaces.
2020-12-23 01:28:25.088  INFO 10724 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 01:28:25.162  INFO 10724 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 01:28:27.574  INFO 10724 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 01:28:27.654  INFO 10724 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 01:28:27.655  INFO 10724 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 01:28:27.990  INFO 10724 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 01:28:27.991  INFO 10724 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4906 ms
2020-12-23 01:28:28.710  INFO 10724 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 01:28:28.858  INFO 10724 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 01:28:29.591  INFO 10724 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 01:28:30.012  INFO 10724 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 01:28:32.658  INFO 10724 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 01:28:32.709  INFO 10724 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 01:28:45.011  INFO 10724 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 01:28:45.021  INFO 10724 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 01:28:45.130  INFO 10724 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 01:28:47.506  INFO 10724 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 01:28:47.508  INFO 10724 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 01:28:47.534  WARN 10724 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 01:28:47.621  WARN 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 01:28:47.622  INFO 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 01:28:47.643  WARN 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 01:28:47.643  INFO 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 01:28:47.769  WARN 10724 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 01:28:49.280  INFO 10724 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 01:28:49.822  INFO 10724 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 30.745 seconds (JVM running for 31.911)
2020-12-23 01:28:51.384  INFO 10724 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 01:28:51.391  INFO 10724 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 01:28:51.422  INFO 10724 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms
2020-12-23 01:28:51.895  INFO 10724 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 01:28:51.906  INFO 10724 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 01:29:28.006  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:29:28.578  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:29:29.968  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:29:30.156  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:29:32.522  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:29:32.658  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:22.109  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:22.252  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:23.832  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:23.969  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:26.014  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:26.149  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:27.399  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:27.570  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:43.047  INFO 10724 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:43.182  INFO 10724 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:44.454  INFO 10724 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:44.590  INFO 10724 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:51.175  INFO 10724 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:51.323  INFO 10724 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:30:53.228  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:30:53.364  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:31:35.272  INFO 10724 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 01:31:35.273  INFO 10724 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 01:31:38.274  WARN 10724 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 01:31:38.277  INFO 10724 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 01:31:38.294  INFO 10724 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 01:31:38.422  INFO 10724 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 01:31:39.330  INFO 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 01:31:41.342  INFO 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 01:31:41.343  WARN 10724 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 01:31:41.345  INFO 10724 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 01:31:41.921  INFO 10724 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 01:31:42.001  INFO 10724 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79ms. Found 10 JPA repository interfaces.
2020-12-23 01:31:42.164  INFO 10724 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 01:31:42.174  INFO 10724 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 01:31:42.358  INFO 10724 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 01:31:42.360  INFO 10724 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 01:31:42.361  INFO 10724 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 01:31:42.428  INFO 10724 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 01:31:42.429  INFO 10724 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1063 ms
2020-12-23 01:31:42.514  INFO 10724 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 01:31:42.524  INFO 10724 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 01:31:42.550  INFO 10724 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 01:31:42.555  INFO 10724 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 01:31:43.790  INFO 10724 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 01:31:43.791  INFO 10724 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 01:31:43.801  INFO 10724 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 01:31:44.187  INFO 10724 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 01:31:44.188  INFO 10724 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 01:31:44.195  WARN 10724 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 01:31:44.202  WARN 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 01:31:44.203  INFO 10724 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 01:31:44.232  WARN 10724 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 01:31:44.704  INFO 10724 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 01:31:45.035  INFO 10724 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.472 seconds (JVM running for 207.124)
2020-12-23 01:31:45.039  INFO 10724 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 01:31:45.763  INFO 10724 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 01:31:45.767  INFO 10724 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 01:31:45.772  INFO 10724 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 01:31:45.917  INFO 10724 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 01:31:45.923  INFO 10724 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 01:31:46.889  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:31:47.101  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:31:50.976  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:31:51.124  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:31:52.992  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:31:53.145  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:32:09.997  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:32:10.219  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:32:18.693  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:32:18.828  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:32:19.902  INFO 10724 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:32:20.034  INFO 10724 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:32:22.328  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:32:22.508  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:32:35.282 ERROR 10724 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$fb235afd.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 01:35:04.000  INFO 10724 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:04.679  INFO 10724 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:07.502  INFO 10724 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:10.715  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:10.856  INFO 10724 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:12.136  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:12.271  INFO 10724 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:13.417  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:13.550  INFO 10724 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:14.675  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:14.807  INFO 10724 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:15.931  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:16.065  INFO 10724 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:17.381  INFO 10724 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:17.515  INFO 10724 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:18.458  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:18.638  INFO 10724 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 01:35:21.526  INFO 10724 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 01:35:21.734  INFO 10724 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:55:44.925  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:55:47.189  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:55:47.191  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:55:47.206  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:55:48.628  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:55:48.907  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 220ms. Found 10 JPA repository interfaces.
2020-12-23 03:55:49.621  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:55:49.686  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:55:51.030  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:55:51.083  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:55:51.084  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:55:51.570  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:55:51.571  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4258 ms
2020-12-23 03:55:52.363  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:55:52.720  INFO 6960 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 03:55:53.667  INFO 6960 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 03:55:54.946  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 03:55:57.922  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 03:55:57.999  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:56:00.193  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:56:00.217  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:56:00.259  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:56:01.653  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:56:01.655  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:56:01.672  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:56:01.680  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:56:01.681  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:56:01.710  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:56:01.711  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:56:01.814  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:56:02.712  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:56:03.281  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 20.635 seconds (JVM running for 23.297)
2020-12-23 03:56:04.518  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:56:04.520  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:56:04.570  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 49 ms
2020-12-23 03:56:04.902  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:56:04.918  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:56:08.942  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:56:11.240  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:56:59.521  INFO 6960 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:56:59.522  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:57:02.524  WARN 6960 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:57:02.527  INFO 6960 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:02.531  INFO 6960 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 03:57:02.596  INFO 6960 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 03:57:03.448  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:57:05.457  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:57:05.457  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:57:05.459  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:57:05.846  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:57:05.923  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76ms. Found 10 JPA repository interfaces.
2020-12-23 03:57:06.085  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:57:06.100  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:57:06.249  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:57:06.250  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:57:06.251  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:57:06.290  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:57:06.291  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 814 ms
2020-12-23 03:57:06.386  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:57:06.394  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 03:57:06.423  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 03:57:06.432  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:57:06.930  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:57:06.931  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:06.945  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:57:07.441  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:57:07.442  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:57:07.454  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:57:07.465  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:57:07.480  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:57:07.523  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:57:08.130  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:57:08.463  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.78 seconds (JVM running for 88.479)
2020-12-23 03:57:08.466  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:57:09.290  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:57:09.292  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:57:09.311  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 03:57:09.448  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:57:09.454  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:57:11.800  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:57:12.344  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:57:14.909  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:57:15.049  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:57:19.132  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:57:19.273  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:57:26.847  INFO 6960 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:57:26.848  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:57:29.850  WARN 6960 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:57:29.851  INFO 6960 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:29.853  INFO 6960 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 03:57:29.875  INFO 6960 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 03:57:30.686  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:57:32.698  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:57:32.699  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:57:32.712  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:57:33.015  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:57:33.076  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59ms. Found 10 JPA repository interfaces.
2020-12-23 03:57:33.173  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:57:33.184  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:57:33.319  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:57:33.320  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:57:33.321  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:57:33.372  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:57:33.372  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 655 ms
2020-12-23 03:57:33.455  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:57:33.463  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 03:57:33.495  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 03:57:33.497  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:57:34.138  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:57:34.139  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:34.147  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:57:34.502  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:57:34.503  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:57:34.510  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:57:34.521  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:57:34.522  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:57:34.551  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:57:35.027  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:57:35.343  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.354 seconds (JVM running for 115.359)
2020-12-23 03:57:35.346  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:57:36.064  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:57:36.066  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:57:36.069  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 03:57:36.214  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:57:36.218  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:57:38.198  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:57:38.830  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:57:46.760  INFO 6960 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:57:46.760  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:57:49.761  WARN 6960 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:57:49.762  INFO 6960 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:49.779  INFO 6960 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 03:57:49.790  INFO 6960 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 03:57:50.570  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:57:52.575  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:57:52.576  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:57:52.589  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:57:53.066  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:57:53.128  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61ms. Found 10 JPA repository interfaces.
2020-12-23 03:57:53.220  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:57:53.230  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:57:53.367  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:57:53.368  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:57:53.369  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:57:53.424  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:57:53.424  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 831 ms
2020-12-23 03:57:53.513  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:57:53.521  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 03:57:53.540  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 03:57:53.541  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:57:53.994  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:57:53.995  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:57:54.004  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:57:54.356  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:57:54.357  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:57:54.364  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:57:54.372  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:57:54.373  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:57:54.401  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:57:54.883  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:57:55.208  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.302 seconds (JVM running for 135.225)
2020-12-23 03:57:55.211  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:57:55.956  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:57:55.958  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:57:55.962  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 03:57:56.109  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:57:56.113  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:57:59.532 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 03:58:02.113  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:58:02.720  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:58:04.030  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:58:04.165  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:58:06.636  INFO 6960 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:58:06.795  INFO 6960 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:58:26.857 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 03:58:32.434  INFO 6960 --- [Thread-27] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:58:32.435  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:58:35.436  WARN 6960 --- [Thread-27] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:58:35.437  INFO 6960 --- [Thread-27] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:58:35.441  INFO 6960 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2020-12-23 03:58:35.454  INFO 6960 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2020-12-23 03:58:36.272  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:58:38.290  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:58:38.301  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:58:38.303  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:58:40.557  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:58:40.617  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59ms. Found 10 JPA repository interfaces.
2020-12-23 03:58:40.875  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:58:40.931  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:58:41.085  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:58:41.086  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:58:41.087  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:58:41.129  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:58:41.130  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2818 ms
2020-12-23 03:58:41.199  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:58:41.207  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2020-12-23 03:58:41.222  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2020-12-23 03:58:41.223  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:58:41.747  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:58:41.748  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:58:41.756  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:58:42.063  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:58:42.064  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:58:42.070  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:58:42.071  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:58:42.072  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:58:42.096  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:58:43.016  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:58:43.346  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.764 seconds (JVM running for 183.362)
2020-12-23 03:58:43.349  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:58:44.129  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:58:44.130  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:58:44.136  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 03:58:44.271  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:58:44.292  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:58:46.767 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 03:59:05.199  INFO 6960 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:59:05.199  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:59:08.201  WARN 6960 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:59:08.203  INFO 6960 --- [Thread-35] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:59:08.216  INFO 6960 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2020-12-23 03:59:08.231  INFO 6960 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2020-12-23 03:59:09.025  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:59:11.031  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:59:11.032  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:59:11.046  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:59:11.361  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:59:11.456  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 93ms. Found 10 JPA repository interfaces.
2020-12-23 03:59:11.591  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:59:11.600  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:59:11.809  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:59:11.810  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:59:11.811  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:59:11.859  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:59:11.866  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 816 ms
2020-12-23 03:59:11.997  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:59:12.009  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2020-12-23 03:59:12.051  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2020-12-23 03:59:12.058  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:59:12.497  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:59:12.498  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:59:12.506  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:59:12.961  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:59:12.962  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:59:12.970  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:59:12.992  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:59:12.993  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:59:13.033  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:59:13.564  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:59:13.891  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.529 seconds (JVM running for 213.907)
2020-12-23 03:59:13.895  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:59:14.596  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:59:14.598  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:59:14.608  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2020-12-23 03:59:14.760  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:59:14.766  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:59:14.950  INFO 6960 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:59:14.951  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 03:59:17.952  WARN 6960 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 03:59:17.953  INFO 6960 --- [Thread-43] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:59:17.969  INFO 6960 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2020-12-23 03:59:17.982  INFO 6960 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2020-12-23 03:59:18.873  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 03:59:20.888  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 03:59:20.889  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 03:59:20.891  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 03:59:21.457  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 03:59:21.531  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73ms. Found 10 JPA repository interfaces.
2020-12-23 03:59:21.641  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 03:59:21.650  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 03:59:21.812  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 03:59:21.813  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 03:59:21.814  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 03:59:21.876  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 03:59:21.877  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 960 ms
2020-12-23 03:59:21.997  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 03:59:22.007  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2020-12-23 03:59:22.037  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2020-12-23 03:59:22.054  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 03:59:22.536  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 03:59:22.537  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 03:59:22.548  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 03:59:22.911  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 03:59:22.912  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 03:59:22.918  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 03:59:22.930  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 03:59:22.931  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 03:59:22.963  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 03:59:23.441  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 03:59:23.530  INFO 6960 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 03:59:23.531  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 03:59:23.537  INFO 6960 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 03:59:23.598  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:59:23.761  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.61 seconds (JVM running for 223.777)
2020-12-23 03:59:23.763  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 03:59:24.530  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:59:24.618  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 03:59:24.622  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 03:59:32.441 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 03:59:37.025  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:59:37.161  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 03:59:40.809  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 03:59:40.967  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:00:05.208 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 04:00:08.616  INFO 6960 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:08.617  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 04:00:11.618  WARN 6960 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 04:00:11.619  INFO 6960 --- [Thread-51] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:11.621  INFO 6960 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2020-12-23 04:00:11.644  INFO 6960 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2020-12-23 04:00:12.476  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 04:00:14.491  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 04:00:14.492  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 04:00:14.494  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 04:00:14.796  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 04:00:14.873  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76ms. Found 10 JPA repository interfaces.
2020-12-23 04:00:14.960 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 04:00:14.994  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 04:00:15.018  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 04:00:15.160  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 04:00:15.162  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 04:00:15.162  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 04:00:15.217  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 04:00:15.218  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 718 ms
2020-12-23 04:00:15.332  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 04:00:15.340  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2020-12-23 04:00:15.373  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2020-12-23 04:00:15.374  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 04:00:15.852  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 04:00:15.853  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:15.864  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 04:00:16.263  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 04:00:16.264  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:16.272  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 04:00:16.283  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 04:00:16.284  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 04:00:16.327  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 04:00:16.840  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 04:00:17.209  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.393 seconds (JVM running for 277.224)
2020-12-23 04:00:17.211  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 04:00:17.968 ERROR 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@2fb0d6f1 > HttpResponse[HTTP/1.1 429 Too Many Requests]@7d2b3a14] null
2020-12-23 04:00:17.972  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 04:00:24.224  INFO 6960 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:24.225  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 04:00:27.226  WARN 6960 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 04:00:27.227  INFO 6960 --- [Thread-59] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:27.229  INFO 6960 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2020-12-23 04:00:27.258  INFO 6960 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2020-12-23 04:00:28.140  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 04:00:30.147  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 04:00:30.148  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 04:00:30.150  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 04:00:30.565  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 04:00:30.636  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71ms. Found 10 JPA repository interfaces.
2020-12-23 04:00:30.766  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 04:00:30.781  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 04:00:30.921  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 04:00:30.922  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 04:00:30.923  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 04:00:30.972  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 04:00:30.973  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 798 ms
2020-12-23 04:00:31.087  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 04:00:31.096  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2020-12-23 04:00:31.130  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2020-12-23 04:00:31.152  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 04:00:31.537  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 04:00:31.537  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:31.563  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 04:00:31.925  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 04:00:31.926  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:31.932  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 04:00:31.946  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 04:00:31.947  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 04:00:31.978  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 04:00:32.453  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 04:00:32.767  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.328 seconds (JVM running for 292.784)
2020-12-23 04:00:32.770  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 04:00:33.855 ERROR 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@47b78dd7 > HttpResponse[HTTP/1.1 429 Too Many Requests]@2109491e] null
2020-12-23 04:00:33.859  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 04:00:43.981  INFO 6960 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:43.982  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 04:00:46.982  WARN 6960 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 04:00:46.984  INFO 6960 --- [Thread-67] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:46.996  INFO 6960 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2020-12-23 04:00:47.006  INFO 6960 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2020-12-23 04:00:48.094  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 04:00:50.108  INFO 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 04:00:50.109  WARN 6960 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 04:00:50.121  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 04:00:50.416  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 04:00:50.488  INFO 6960 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71ms. Found 10 JPA repository interfaces.
2020-12-23 04:00:50.594  INFO 6960 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 04:00:50.606  INFO 6960 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 04:00:50.755  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 04:00:50.756  INFO 6960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 04:00:50.756  INFO 6960 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 04:00:50.811  INFO 6960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 04:00:50.811  INFO 6960 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 686 ms
2020-12-23 04:00:50.908  INFO 6960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 04:00:50.918  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2020-12-23 04:00:50.940  INFO 6960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2020-12-23 04:00:50.941  INFO 6960 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 04:00:51.439  INFO 6960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 04:00:51.441  INFO 6960 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:00:51.480  INFO 6960 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 04:00:51.931  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 04:00:51.932  INFO 6960 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:00:51.939  WARN 6960 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 04:00:51.954  WARN 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 04:00:51.955  INFO 6960 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 04:00:52.001  WARN 6960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 04:00:52.456  INFO 6960 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 04:00:52.762  INFO 6960 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.572 seconds (JVM running for 312.779)
2020-12-23 04:00:52.765  INFO 6960 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 04:00:53.460  INFO 6960 --- [http-nio-5000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 04:00:53.462  INFO 6960 --- [http-nio-5000-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 04:00:53.480  INFO 6960 --- [http-nio-5000-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 04:00:53.612  INFO 6960 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 04:00:53.616  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 04:00:57.583  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:00:57.750  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:01.959  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:02.096  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:08.622 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 04:01:11.165  INFO 6960 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:11.300  INFO 6960 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:12.870  INFO 6960 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:13.003  INFO 6960 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:24.231 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 04:01:24.780  INFO 6960 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:24.953  INFO 6960 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:26.904  INFO 6960 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:27.036  INFO 6960 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:31.438  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received UnsubscribedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:36.855  INFO 6960 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received ConversationStartedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:42.455  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:43.045  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:43.175  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:43.176  INFO 6960 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : New user registered: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:43.987 ERROR 6960 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$b689fb8a.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 04:01:46.883  INFO 6960 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:47.037  INFO 6960 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:48.344  INFO 6960 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:48.497  INFO 6960 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:50.903  INFO 6960 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 04:01:51.034  INFO 6960 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:51.160  INFO 6960 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:01:54.917  INFO 6960 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:01:55.054  INFO 6960 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:02:07.368  INFO 6960 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:02:07.500  INFO 6960 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:02:09.137  INFO 6960 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:02:09.269  INFO 6960 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:02:17.292  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 04:02:17.425  INFO 6960 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 04:04:28.975  INFO 6960 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 04:04:28.976  INFO 6960 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 04:04:31.977  WARN 6960 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 04:04:31.979  INFO 6960 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 04:04:31.991  INFO 6960 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2020-12-23 04:04:32.003  INFO 6960 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2020-12-23 14:08:31.981  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:08:34.103  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:08:34.104  WARN 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:08:34.116  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:08:34.722  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:08:34.839  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 108ms. Found 10 JPA repository interfaces.
2020-12-23 14:08:35.225  INFO 17780 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:08:35.267  INFO 17780 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:08:36.367  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:08:36.379  INFO 17780 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:08:36.386  INFO 17780 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:08:36.571  INFO 17780 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:08:36.572  INFO 17780 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2420 ms
2020-12-23 14:08:36.806  INFO 17780 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:08:36.857  INFO 17780 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 14:08:36.974  INFO 17780 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 14:08:37.067  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 14:08:37.423  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 14:08:37.438  INFO 17780 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:08:38.550  INFO 17780 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:08:38.560  INFO 17780 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:08:38.596  INFO 17780 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:08:39.440  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:08:39.441  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:08:39.455  WARN 17780 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:08:39.458  WARN 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:08:39.465  INFO 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:08:39.471  WARN 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:08:39.472  INFO 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:08:39.549  WARN 17780 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:08:40.262  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:08:40.640  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 10.309 seconds (JVM running for 11.191)
2020-12-23 14:08:41.560  INFO 17780 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:08:41.562  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:08:41.593  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms
2020-12-23 14:08:41.837  INFO 17780 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:08:41.845  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:08:47.833  INFO 17780 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 14:08:48.118  INFO 17780 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:08:50.348  INFO 17780 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 14:08:52.315  INFO 17780 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:08:52.467  INFO 17780 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:09:59.764  INFO 17780 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: FILE
2020-12-23 14:10:04.702  INFO 17780 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: FILE
2020-12-23 14:10:06.429  INFO 17780 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:10:06.568  INFO 17780 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:10:08.454  INFO 17780 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:10:08.594  INFO 17780 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:10:10.689  INFO 17780 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT
2020-12-23 14:10:11.082  INFO 17780 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:11:07.994  INFO 17780 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:11:08.074  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:11:11.075  WARN 17780 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:11:11.078  INFO 17780 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:11:11.083  INFO 17780 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 14:11:11.098  INFO 17780 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 14:11:11.907  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:11:13.916  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:11:13.916  WARN 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:11:13.918  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:11:14.314  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:11:14.370  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54ms. Found 10 JPA repository interfaces.
2020-12-23 14:11:14.487  INFO 17780 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:11:14.498  INFO 17780 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:11:14.694  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:11:14.695  INFO 17780 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:11:14.697  INFO 17780 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:11:14.739  INFO 17780 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:11:14.740  INFO 17780 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 817 ms
2020-12-23 14:11:14.826  INFO 17780 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:11:14.835  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 14:11:14.902  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 14:11:14.903  INFO 17780 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:11:15.487  INFO 17780 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:11:15.488  INFO 17780 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:11:15.501  INFO 17780 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:11:15.973  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:11:15.973  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:11:15.982  WARN 17780 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:11:15.983  WARN 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:11:15.984  INFO 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:11:16.017  WARN 17780 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:11:16.555  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:11:16.915  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.7 seconds (JVM running for 167.466)
2020-12-23 14:11:16.936  INFO 17780 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:11:17.725  INFO 17780 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:11:17.727  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:11:17.731  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 14:11:17.868  INFO 17780 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:11:17.885  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:12:08.087 ERROR 17780 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1ebbbd09.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:12:24.315  INFO 17780 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:12:24.315  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:12:27.316  WARN 17780 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:12:27.318  INFO 17780 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:12:27.330  INFO 17780 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 14:12:27.340  INFO 17780 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 14:12:28.119  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:12:30.139  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:12:30.140  WARN 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:12:30.152  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:12:30.437  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:12:30.498  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59ms. Found 10 JPA repository interfaces.
2020-12-23 14:12:30.600  INFO 17780 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:12:30.609  INFO 17780 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:12:30.772  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:12:30.773  INFO 17780 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:12:30.774  INFO 17780 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:12:30.841  INFO 17780 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:12:30.842  INFO 17780 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 684 ms
2020-12-23 14:12:30.922  INFO 17780 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:12:30.930  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 14:12:30.980  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 14:12:30.981  INFO 17780 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:12:31.377  INFO 17780 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:12:31.378  INFO 17780 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:12:31.387  INFO 17780 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:12:31.713  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:12:31.714  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:12:31.720  WARN 17780 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:12:31.728  WARN 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:12:31.729  INFO 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:12:31.758  WARN 17780 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:12:32.225  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:12:32.538  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.084 seconds (JVM running for 243.089)
2020-12-23 14:12:32.541  INFO 17780 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:12:33.274  INFO 17780 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:12:33.276  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:12:33.289  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 14:12:33.424  INFO 17780 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:12:33.428  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:12:35.969  INFO 17780 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 14:12:36.306  INFO 17780 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:12:38.463  INFO 17780 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 14:12:38.615  INFO 17780 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:13:18.478  INFO 17780 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:13:18.479  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:13:21.480  WARN 17780 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:13:21.482  INFO 17780 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:13:21.484  INFO 17780 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 14:13:21.495  INFO 17780 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 14:13:22.623  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:13:24.321 ERROR 17780 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1ebbbd09.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:13:24.643  INFO 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:13:24.644  WARN 17780 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:13:24.648  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:13:24.945  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:13:25.011  INFO 17780 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 64ms. Found 10 JPA repository interfaces.
2020-12-23 14:13:25.143  INFO 17780 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:13:25.153  INFO 17780 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:13:25.675  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:13:25.676  INFO 17780 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:13:25.677  INFO 17780 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:13:25.719  INFO 17780 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:13:25.719  INFO 17780 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1058 ms
2020-12-23 14:13:25.798  INFO 17780 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:13:25.807  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 14:13:25.855  INFO 17780 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 14:13:25.856  INFO 17780 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:13:26.273  INFO 17780 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:13:26.274  INFO 17780 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:13:26.285  INFO 17780 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:13:26.605  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:13:26.606  INFO 17780 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:13:26.612  WARN 17780 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:13:26.617  WARN 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:13:26.617  INFO 17780 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:13:26.647  WARN 17780 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:13:27.093  INFO 17780 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:13:27.403  INFO 17780 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.776 seconds (JVM running for 297.955)
2020-12-23 14:13:27.406  INFO 17780 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:13:28.169  INFO 17780 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:13:28.170  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:13:28.174  INFO 17780 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 14:13:28.318  INFO 17780 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:13:28.323  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:14:18.483 ERROR 17780 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1ebbbd09.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:53:01.669  INFO 17780 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:53:01.670  INFO 17780 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:53:04.670  WARN 17780 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:53:04.671  INFO 17780 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:53:04.683  INFO 17780 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2020-12-23 14:53:04.692  INFO 17780 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2020-12-23 14:53:52.585  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:53:54.705  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:53:54.706  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:53:54.718  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:53:55.337  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:53:55.444  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 97ms. Found 10 JPA repository interfaces.
2020-12-23 14:53:55.796  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:53:55.839  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:53:56.926  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:53:56.938  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:53:56.940  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:53:57.124  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:53:57.125  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2367 ms
2020-12-23 14:53:57.359  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:53:57.419  INFO 15944 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 14:53:57.530  INFO 15944 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 14:53:57.627  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 14:53:57.903  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 14:53:57.918  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:53:59.170  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:53:59.178  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:53:59.221  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:54:00.539  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:54:00.541  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:54:00.562  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:54:00.569  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:54:00.572  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:54:00.585  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:54:00.586  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:54:00.663  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:54:01.692  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:54:02.324  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.373 seconds (JVM running for 12.309)
2020-12-23 14:54:03.203  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:54:03.204  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:54:03.224  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2020-12-23 14:54:03.425  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:54:03.433  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:54:09.117  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 14:54:09.491  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:54:12.227  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 14:54:12.362  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:54:13.959  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 14:54:14.104  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:55:20.918  INFO 15944 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:55:20.919  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:55:23.920  WARN 15944 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:55:23.923  INFO 15944 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:55:23.928  INFO 15944 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 14:55:23.943  INFO 15944 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 14:55:24.766  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:55:26.775  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:55:26.789  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:55:26.792  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:55:27.121  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:55:27.186  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 64ms. Found 10 JPA repository interfaces.
2020-12-23 14:55:27.426  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:55:27.486  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:55:28.042  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:55:28.049  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:55:28.051  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:55:28.117  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:55:28.120  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1319 ms
2020-12-23 14:55:28.339  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:55:28.367  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 14:55:28.403  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 14:55:28.404  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:55:30.469  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:55:30.470  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:55:30.491  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:55:31.004  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:55:31.005  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:55:31.015  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:55:31.017  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:55:31.018  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:55:31.052  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:55:31.735  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:55:32.297  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.271 seconds (JVM running for 102.283)
2020-12-23 14:55:32.324  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:55:33.057  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:55:33.058  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:55:33.069  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2020-12-23 14:55:33.207  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:55:33.212  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:55:34.001  INFO 15944 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:55:34.002  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:55:37.003  WARN 15944 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:55:37.005  INFO 15944 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:55:37.007  INFO 15944 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 14:55:37.022  INFO 15944 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 14:55:37.965  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:55:39.975  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:55:39.977  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:55:39.989  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:55:40.544  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:55:40.605  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58ms. Found 10 JPA repository interfaces.
2020-12-23 14:55:40.714  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:55:40.723  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:55:40.893  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:55:40.894  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:55:40.895  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:55:40.938  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:55:40.939  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 936 ms
2020-12-23 14:55:41.021  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:55:41.031  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 14:55:41.051  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 14:55:41.052  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:55:41.583  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:55:41.584  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:55:41.594  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:55:41.986  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:55:41.987  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:55:41.994  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:55:41.995  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:55:41.996  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:55:42.024  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:55:42.524  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:55:42.876  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.759 seconds (JVM running for 112.861)
2020-12-23 14:55:42.879  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:55:43.559  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:55:43.561  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:55:43.566  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 14:55:43.704  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:55:43.709  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:55:52.107  INFO 15944 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:55:52.112  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:55:55.113  WARN 15944 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:55:55.117  INFO 15944 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:55:55.121  INFO 15944 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 14:55:55.134  INFO 15944 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 14:55:56.228  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:55:58.247  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:55:58.248  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:55:58.250  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:55:58.749  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:55:58.822  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 71ms. Found 10 JPA repository interfaces.
2020-12-23 14:55:59.011  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:55:59.028  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:55:59.337  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:55:59.339  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:55:59.340  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:55:59.412  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:55:59.413  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1159 ms
2020-12-23 14:55:59.553  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:55:59.568  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 14:55:59.592  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 14:55:59.594  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:56:00.652  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:56:00.653  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:00.668  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:56:01.122  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:01.124  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:01.132  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:56:01.133  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:56:01.133  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:56:01.177  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:56:02.139  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:56:02.576  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.302 seconds (JVM running for 132.562)
2020-12-23 14:56:02.582  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:56:03.294  INFO 15944 --- [Thread-27] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:03.296  INFO 15944 --- [Thread-27] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:03.299  INFO 15944 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2020-12-23 14:56:03.316  INFO 15944 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2020-12-23 14:56:05.806 ERROR 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@1a421134 > HttpResponse[HTTP/1.1 502 Bad Gateway]@8bc0e1c] null
2020-12-23 14:56:05.913  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:05.913  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:05.918  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:56:06.784  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:56:08.805  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:56:08.806  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:56:08.808  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:56:09.193  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:56:09.264  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69ms. Found 10 JPA repository interfaces.
2020-12-23 14:56:09.417  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:56:09.439  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:56:09.704  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:56:09.705  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:56:09.706  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:56:09.740  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:56:09.741  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 929 ms
2020-12-23 14:56:09.812  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:56:09.820  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2020-12-23 14:56:09.842  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2020-12-23 14:56:09.843  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:56:10.384  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:56:10.385  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:10.394  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:56:10.742  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:10.743  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:10.760  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:56:10.762  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:56:10.764  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:56:10.811  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:56:11.880  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:56:12.347  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.427 seconds (JVM running for 142.332)
2020-12-23 14:56:12.350  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:56:13.118  INFO 15944 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:13.138  INFO 15944 --- [Thread-35] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:13.161  INFO 15944 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2020-12-23 14:56:13.193  INFO 15944 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2020-12-23 14:56:15.533 ERROR 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@783add7f > HttpResponse[HTTP/1.1 502 Bad Gateway]@27102338] null
2020-12-23 14:56:15.681  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:15.682  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:15.710  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:56:17.243  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:56:19.253  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:56:19.254  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:56:19.255  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:56:19.717  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:56:19.797  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 79ms. Found 10 JPA repository interfaces.
2020-12-23 14:56:20.066  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:56:20.092  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:56:20.465  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:56:20.466  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:56:20.467  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:56:20.572  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:56:20.615  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1354 ms
2020-12-23 14:56:20.931  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:56:20.931 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:56:20.947  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2020-12-23 14:56:20.991  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2020-12-23 14:56:20.992  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:56:21.477  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:56:21.478  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:21.491  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:56:22.014  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:22.015  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:22.029  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:56:22.030  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:56:22.030  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:56:22.072  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:56:22.696  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:56:23.069  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.362 seconds (JVM running for 153.054)
2020-12-23 14:56:23.070  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:56:23.785  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:56:23.789  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:56:23.795  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 14:56:23.935  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:56:23.940  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:56:34.009 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:56:34.312  INFO 15944 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:34.313  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 14:56:37.313  WARN 15944 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 14:56:37.315  INFO 15944 --- [Thread-43] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:37.327  INFO 15944 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2020-12-23 14:56:37.339  INFO 15944 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2020-12-23 14:56:38.139  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 14:56:40.149  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 14:56:40.150  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 14:56:40.152  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 14:56:40.499  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 14:56:40.557  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56ms. Found 10 JPA repository interfaces.
2020-12-23 14:56:40.671  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 14:56:40.679  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 14:56:40.846  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 14:56:40.847  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 14:56:40.848  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 14:56:40.909  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 14:56:40.910  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 744 ms
2020-12-23 14:56:40.996  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 14:56:41.006  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2020-12-23 14:56:41.053  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2020-12-23 14:56:41.054  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 14:56:41.433  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 14:56:41.433  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 14:56:41.445  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 14:56:41.832  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 14:56:41.833  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 14:56:41.840  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 14:56:41.847  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 14:56:41.847  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 14:56:41.880  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 14:56:42.357  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 14:56:42.669  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.19 seconds (JVM running for 172.655)
2020-12-23 14:56:42.672  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 14:56:43.407  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 14:56:43.409  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 14:56:43.413  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 14:56:43.558  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 14:56:43.563  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 14:56:49.460  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 14:56:50.082  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:56:51.454  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 14:56:51.594  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:56:52.121 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 14:56:53.355  INFO 15944 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 14:56:53.495  INFO 15944 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:56:54.769  INFO 15944 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 14:56:54.901  INFO 15944 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:57:26.954  INFO 15944 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 14:57:27.109  INFO 15944 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 14:57:34.320 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:00:25.088  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:00:25.834  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:00:27.170  INFO 15944 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:00:27.317  INFO 15944 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:00:31.663  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:00:31.839  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:01:01.303  INFO 15944 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:01.304  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:01:04.304  WARN 15944 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:01:04.306  INFO 15944 --- [Thread-51] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:04.310  INFO 15944 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2020-12-23 15:01:04.326  INFO 15944 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2020-12-23 15:01:05.480  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:01:07.501  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:01:07.502  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:01:07.513  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:01:07.822  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:01:07.885  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 63ms. Found 10 JPA repository interfaces.
2020-12-23 15:01:08.034  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:01:08.050  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:01:08.303  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:01:08.313  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:01:08.347  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:01:08.460  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:01:08.461  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 942 ms
2020-12-23 15:01:08.656  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:01:08.680  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2020-12-23 15:01:08.720  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2020-12-23 15:01:08.748  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:01:09.371  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:01:09.372  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:09.385  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:01:09.862  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:01:09.864  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:09.903  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:01:09.908  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:01:09.909  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:01:09.956  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:01:10.587  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:01:10.981  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.458 seconds (JVM running for 440.967)
2020-12-23 15:01:10.986  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:01:11.828 ERROR 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@5cdf0d25 > HttpResponse[HTTP/1.1 503 Service Unavailable]@1ab83533] null
2020-12-23 15:01:11.876  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:01:12.086  INFO 15944 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:12.087  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:01:15.088  WARN 15944 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:01:15.090  INFO 15944 --- [Thread-59] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:15.105  INFO 15944 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2020-12-23 15:01:15.121  INFO 15944 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2020-12-23 15:01:16.155  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:01:18.176  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:01:18.177  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:01:18.178  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:01:18.640  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:01:18.795  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 154ms. Found 10 JPA repository interfaces.
2020-12-23 15:01:18.995  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:01:19.009  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:01:19.279  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:01:19.280  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:01:19.281  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:01:19.369  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:01:19.370  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1163 ms
2020-12-23 15:01:19.503  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:01:19.529  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2020-12-23 15:01:19.557  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2020-12-23 15:01:19.569  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:01:20.131  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:01:20.135  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:20.162  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:01:20.960  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:01:20.960  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:20.968  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:01:20.977  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:01:20.977  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:01:21.010  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:01:21.609  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:01:22.005  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.667 seconds (JVM running for 451.991)
2020-12-23 15:01:22.008  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:01:22.764  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:01:22.765  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:01:22.770  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 15:01:22.910  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:01:22.915  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:01:24.567  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:01:24.724  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:01:26.291  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:01:26.427  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:01:42.201  INFO 15944 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:42.203  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:01:45.203  WARN 15944 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:01:45.205  INFO 15944 --- [Thread-67] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:45.218  INFO 15944 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2020-12-23 15:01:45.232  INFO 15944 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2020-12-23 15:01:46.094  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:01:48.100  INFO 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:01:48.101  WARN 15944 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:01:48.103  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:01:48.420  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:01:48.495  INFO 15944 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74ms. Found 10 JPA repository interfaces.
2020-12-23 15:01:48.685  INFO 15944 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:01:48.694  INFO 15944 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:01:48.891  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:01:48.892  INFO 15944 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:01:48.893  INFO 15944 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:01:48.959  INFO 15944 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:01:48.960  INFO 15944 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 842 ms
2020-12-23 15:01:49.058  INFO 15944 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:01:49.069  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2020-12-23 15:01:49.093  INFO 15944 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2020-12-23 15:01:49.094  INFO 15944 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:01:49.802  INFO 15944 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:01:49.803  INFO 15944 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:01:49.814  INFO 15944 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:01:50.191  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:01:50.192  INFO 15944 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:01:50.201  WARN 15944 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:01:50.206  WARN 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:01:50.207  INFO 15944 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:01:50.263  WARN 15944 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:01:50.797  INFO 15944 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:01:51.130  INFO 15944 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.714 seconds (JVM running for 481.116)
2020-12-23 15:01:51.133  INFO 15944 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:01:51.893  INFO 15944 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:01:51.896  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:01:51.899  INFO 15944 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 15:01:52.035  INFO 15944 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:01:52.038  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:01:53.244  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:01:53.397  INFO 15944 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:01:59.921  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:02:00.056  INFO 15944 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:02:01.310 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:02:06.232  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:02:06.363  INFO 15944 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:02:07.938  INFO 15944 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 15:02:08.079  INFO 15944 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:02:12.095 ERROR 15944 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$2dbacf3b.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:02:20.789  INFO 15944 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:02:20.790  INFO 15944 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:02:23.791  WARN 15944 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:02:23.793  INFO 15944 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:02:23.804  INFO 15944 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2020-12-23 15:02:23.821  INFO 15944 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2020-12-23 15:05:06.437  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:05:08.563  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:05:08.563  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:05:08.575  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:05:09.220  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:05:09.331  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 101ms. Found 10 JPA repository interfaces.
2020-12-23 15:05:09.699  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:05:09.746  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:05:10.749  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:05:10.760  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:05:10.761  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:05:10.981  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:05:10.982  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2367 ms
2020-12-23 15:05:11.211  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:05:11.265  INFO 21196 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 15:05:11.560  INFO 21196 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 15:05:11.684  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 15:05:12.109  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 15:05:12.128  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:05:13.804  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:05:13.813  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:05:13.848  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:05:14.732  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:05:14.733  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:05:14.754  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:05:14.764  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:05:14.765  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:05:14.772  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:05:14.782  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:05:14.999  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:05:15.846  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:05:16.650  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.724 seconds (JVM running for 12.545)
2020-12-23 15:05:17.719  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:05:17.728  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:05:17.749  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 17 ms
2020-12-23 15:05:18.005  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:05:18.023  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:05:22.803  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 15:05:23.046  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:05:24.763  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 15:05:24.899  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:05:30.056  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 15:05:30.211  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:05:33.863  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.integrations
2020-12-23 15:05:34.005  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:05:35.313  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.integrationsMenu.back
2020-12-23 15:05:35.452  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:05:36.748  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:05:36.892  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:06:26.419  INFO 21196 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:06:26.422  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:06:29.430  WARN 21196 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:06:29.440  INFO 21196 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:06:29.450  INFO 21196 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 15:06:29.568  INFO 21196 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 15:06:31.480  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:06:33.852  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:06:33.855  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:06:33.859  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:06:34.502  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:06:34.626  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 122ms. Found 10 JPA repository interfaces.
2020-12-23 15:06:34.894  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:06:34.925  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:06:35.657  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:06:35.659  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:06:35.661  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:06:35.750  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:06:35.751  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1887 ms
2020-12-23 15:06:35.935  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:06:35.955  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 15:06:36.033  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 15:06:36.107  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:06:36.801  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:06:36.802  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:06:36.816  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:06:37.413  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:06:37.415  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:06:37.432  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:06:37.433  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:06:37.436  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:06:37.514  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:06:38.261  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:06:38.678  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.98 seconds (JVM running for 94.573)
2020-12-23 15:06:38.683  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:06:39.517  INFO 21196 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:06:39.520  INFO 21196 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:06:39.522  INFO 21196 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 15:06:39.542  INFO 21196 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 15:06:39.545 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@1938eb55 > HttpResponse[HTTP/1.1 503 Service Unavailable]@380e1f14] null
2020-12-23 15:06:39.647  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:06:39.648  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:06:39.653  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:06:40.518  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:06:42.527  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:06:42.528  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:06:42.531  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:06:42.986  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:06:43.098  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110ms. Found 10 JPA repository interfaces.
2020-12-23 15:06:43.265  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:06:43.274  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:06:44.005  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:06:44.009  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:06:44.010  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:06:44.079  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:06:44.082  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1546 ms
2020-12-23 15:06:44.301  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:06:44.317  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 15:06:44.359  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 15:06:44.374  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:06:45.060  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:06:45.060  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:06:45.073  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:06:45.638  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:06:45.639  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:06:45.648  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:06:45.650  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:06:45.652  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:06:45.715  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:06:46.437  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:06:47.093  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.438 seconds (JVM running for 102.988)
2020-12-23 15:06:47.097  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:06:47.804  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:06:47.808  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:06:47.817  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2020-12-23 15:06:47.971  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:06:47.985  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:07:26.440 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:07:39.012  INFO 21196 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:07:39.013  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:07:42.013  WARN 21196 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:07:42.015  INFO 21196 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:07:42.020  INFO 21196 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 15:07:42.041  INFO 21196 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 15:07:43.041  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:07:45.060  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:07:45.060  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:07:45.061  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:07:45.355  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:07:45.414  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59ms. Found 10 JPA repository interfaces.
2020-12-23 15:07:45.533  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:07:45.544  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:07:45.723  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:07:45.724  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:07:45.724  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:07:45.773  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:07:45.773  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 707 ms
2020-12-23 15:07:45.855  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:07:45.863  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 15:07:45.897  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 15:07:45.898  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:07:46.404  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:07:46.405  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:07:46.414  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:07:46.908  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:07:46.909  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:07:46.919  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:07:46.921  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:07:46.921  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:07:46.994  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:07:47.647  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:07:48.072  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.848 seconds (JVM running for 163.967)
2020-12-23 15:07:48.075  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:07:48.812  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:07:48.814  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:07:48.821  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 15:07:48.963  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:07:48.973  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:08:38.210  INFO 21196 --- [Thread-27] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:08:38.211  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:08:39.023 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:08:41.211  WARN 21196 --- [Thread-27] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:08:41.212  INFO 21196 --- [Thread-27] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:08:41.214  INFO 21196 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2020-12-23 15:08:41.226  INFO 21196 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2020-12-23 15:08:42.018  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:08:44.038  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:08:44.038  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:08:44.041  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:08:44.326  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:08:44.376  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50ms. Found 10 JPA repository interfaces.
2020-12-23 15:08:44.466  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:08:44.511  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:08:44.745  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:08:44.746  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:08:44.747  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:08:44.787  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:08:44.788  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 743 ms
2020-12-23 15:08:44.864  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:08:44.871  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2020-12-23 15:08:44.887  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2020-12-23 15:08:44.888  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:08:45.369  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:08:45.370  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:08:45.382  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:08:45.853  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:08:45.853  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:08:45.862  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:08:45.863  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:08:45.864  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:08:45.913  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:08:47.303  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:08:47.948  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.599 seconds (JVM running for 223.843)
2020-12-23 15:08:47.976  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:08:48.742  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:08:48.746  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:08:48.752  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 15:08:48.891  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:08:48.902  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:08:55.054  INFO 21196 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:08:55.055  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:08:58.056  WARN 21196 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:08:58.057  INFO 21196 --- [Thread-35] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:08:58.071  INFO 21196 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2020-12-23 15:08:58.081  INFO 21196 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2020-12-23 15:08:59.000  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:09:01.006  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:09:01.007  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:09:01.009  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:09:01.377  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:09:01.453  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 74ms. Found 10 JPA repository interfaces.
2020-12-23 15:09:01.597  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:09:01.610  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:09:01.853  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:09:01.854  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:09:01.854  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:09:01.938  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:09:01.938  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 910 ms
2020-12-23 15:09:02.052  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:09:02.067  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2020-12-23 15:09:02.098  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2020-12-23 15:09:02.100  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:09:02.624  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:09:02.625  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:09:02.655  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:09:03.185  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:09:03.186  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:09:03.195  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:09:03.207  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:09:03.232  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:09:03.285  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:09:03.917  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:09:04.250  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.028 seconds (JVM running for 240.145)
2020-12-23 15:09:04.253  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:09:05.022  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:09:05.024  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:09:05.028  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 15:09:05.186  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:09:05.191  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:09:06.884  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:09:07.046  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:09:08.905  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:09:09.039  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:09:30.622  INFO 21196 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:09:30.623  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:09:33.624  WARN 21196 --- [Thread-43] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:09:33.625  INFO 21196 --- [Thread-43] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:09:33.642  INFO 21196 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2020-12-23 15:09:33.655  INFO 21196 --- [Thread-43] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2020-12-23 15:09:34.481  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:09:36.485  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:09:36.486  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:09:36.490  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:09:36.902  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:09:36.962  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59ms. Found 10 JPA repository interfaces.
2020-12-23 15:09:37.059  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:09:37.068  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:09:37.248  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:09:37.249  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:09:37.250  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:09:37.292  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:09:37.293  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 799 ms
2020-12-23 15:09:37.376  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:09:37.384  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2020-12-23 15:09:37.406  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2020-12-23 15:09:37.412  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:09:37.844  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:09:37.845  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:09:37.855  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:09:38.202  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:09:38.203  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:09:38.212  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:09:38.217  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:09:38.218  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:09:38.219 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:09:38.260  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:09:38.911  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:09:39.312  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.501 seconds (JVM running for 275.207)
2020-12-23 15:09:39.316  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:09:40.042  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:09:40.043  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:09:40.049  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 15:09:40.191  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:09:40.197  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:09:42.035  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:09:42.207  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:09:44.055  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:09:44.191  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:09:55.061 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:10:04.650  INFO 21196 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:10:04.651  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:10:07.651  WARN 21196 --- [Thread-51] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:10:07.662  INFO 21196 --- [Thread-51] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:10:07.673  INFO 21196 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2020-12-23 15:10:07.692  INFO 21196 --- [Thread-51] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2020-12-23 15:10:08.567  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:10:10.582  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:10:10.583  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:10:10.585  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:10:10.877  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:10:10.938  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60ms. Found 10 JPA repository interfaces.
2020-12-23 15:10:11.039  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:10:11.052  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:10:11.215  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:10:11.216  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:10:11.216  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:10:11.292  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:10:11.293  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 693 ms
2020-12-23 15:10:11.397  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:10:11.407  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2020-12-23 15:10:11.431  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2020-12-23 15:10:11.445  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:10:11.863  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:10:11.864  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:10:11.877  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:10:12.282  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:10:12.283  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:10:12.293  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:10:12.299  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:10:12.301  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:10:12.350  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:10:12.836  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:10:13.158  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.303 seconds (JVM running for 309.053)
2020-12-23 15:10:13.161  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:10:13.897  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:10:13.899  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:10:13.905  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 15:10:14.052  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:10:14.058  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:10:15.831  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:10:15.992  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:17.281  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:10:17.415  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:22.262  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:10:22.415  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:26.293  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 15:10:26.432  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:27.608  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 15:10:27.747  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:29.057  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:10:29.189  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:10:30.629 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:10:48.918  INFO 21196 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:10:48.919  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:10:51.919  WARN 21196 --- [Thread-59] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:10:51.921  INFO 21196 --- [Thread-59] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:10:51.923  INFO 21196 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2020-12-23 15:10:51.938  INFO 21196 --- [Thread-59] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2020-12-23 15:10:52.856  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:10:54.863  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:10:54.864  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:10:54.868  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:10:55.220  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:10:55.287  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66ms. Found 10 JPA repository interfaces.
2020-12-23 15:10:55.395  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:10:55.405  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:10:55.570  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:10:55.571  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:10:55.572  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:10:55.621  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:10:55.621  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 748 ms
2020-12-23 15:10:55.696  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:10:55.704  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2020-12-23 15:10:55.721  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2020-12-23 15:10:55.722  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:10:56.084  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:10:56.085  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:10:56.094  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:10:56.618  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:10:56.619  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:10:56.659  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:10:56.662  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:10:56.684  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:10:56.762  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:10:57.225  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:10:57.579  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.47 seconds (JVM running for 353.474)
2020-12-23 15:10:57.581  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:10:58.327  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:10:58.329  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:10:58.334  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 15:10:58.473  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:10:58.477  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:10:59.495  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:10:59.656  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:11:01.963  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:11:02.118  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:11:04.656 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:11:07.083  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:11:07.246  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:11:48.932 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:13:24.278  INFO 21196 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:13:24.279  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:13:27.280  WARN 21196 --- [Thread-67] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:13:27.281  INFO 21196 --- [Thread-67] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:13:27.285  INFO 21196 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2020-12-23 15:13:27.315  INFO 21196 --- [Thread-67] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2020-12-23 15:13:28.188  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:13:30.203  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:13:30.204  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:13:30.216  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:13:30.524  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:13:30.581  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56ms. Found 10 JPA repository interfaces.
2020-12-23 15:13:30.693  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:13:30.702  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:13:30.945  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:13:30.946  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:13:30.947  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:13:30.986  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:13:30.986  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 764 ms
2020-12-23 15:13:31.079  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:13:31.089  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2020-12-23 15:13:31.119  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2020-12-23 15:13:31.119  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:13:31.614  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:13:31.615  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:13:31.629  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:13:32.124  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:13:32.125  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:13:32.135  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:13:32.142  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:13:32.142  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:13:32.188  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:13:32.766  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:13:33.128  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.607 seconds (JVM running for 509.023)
2020-12-23 15:13:33.131  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:13:33.856  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:13:33.859  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:13:33.864  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 15:13:34.009  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:13:34.014  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:13:40.610  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.integrations
2020-12-23 15:13:40.764  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:13:59.646  INFO 21196 --- [Thread-75] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:13:59.647  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:14:02.649  WARN 21196 --- [Thread-75] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:14:02.652  INFO 21196 --- [Thread-75] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:14:02.654  INFO 21196 --- [Thread-75] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2020-12-23 15:14:02.667  INFO 21196 --- [Thread-75] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2020-12-23 15:14:03.731  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:14:05.750  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:14:05.750  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:14:05.764  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:14:06.062  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:14:06.122  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58ms. Found 10 JPA repository interfaces.
2020-12-23 15:14:06.246  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:14:06.258  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:14:06.483  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:14:06.484  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:14:06.484  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:14:06.541  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:14:06.542  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 772 ms
2020-12-23 15:14:06.636  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:14:06.643  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2020-12-23 15:14:06.671  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2020-12-23 15:14:06.681  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:14:07.213  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:14:07.214  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:14:07.228  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:14:07.556  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:14:07.557  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:14:07.563  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:14:07.569  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:14:07.570  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:14:07.597  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:14:08.104  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:14:08.423  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.516 seconds (JVM running for 544.318)
2020-12-23 15:14:08.425  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:14:09.136  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:14:09.138  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:14:09.142  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 15:14:09.285  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:14:09.290  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:14:10.894  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.integrationsMenu.back
2020-12-23 15:14:11.052  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:12.751  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.integrations
2020-12-23 15:14:12.892  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:19.652  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.integrationsMenu.back
2020-12-23 15:14:19.808  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:23.134  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 15:14:23.273  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:24.285 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:14:27.453  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.list
2020-12-23 15:14:27.676  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:27.797  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:27.946  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:29.830  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.add
2020-12-23 15:14:29.962  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:31.714  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 15:14:31.844  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:33.699  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.delete
2020-12-23 15:14:33.831  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:33.989  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:35.644  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 15:14:35.783  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:36.938  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.changePrivilegies
2020-12-23 15:14:38.791  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 15:14:38.970  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:40.678  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 15:14:40.811  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:43.003  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:14:43.136  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:44.383  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.list
2020-12-23 15:14:45.693  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:45.821  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:48.958  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.additionalActions
2020-12-23 15:14:49.087  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:50.432  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:14:50.584  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:51.837  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 15:14:51.973  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:53.193  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.aboutManagersWork
2020-12-23 15:14:53.444  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:53.566  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:55.907  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.aboutBotWork
2020-12-23 15:14:56.107  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:56.266  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:14:59.675 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:14:59.803  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 15:14:59.972  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:15:02.063  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:15:02.193  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:16:51.925  INFO 21196 --- [Thread-83] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:16:51.926  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:16:54.926  WARN 21196 --- [Thread-83] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:16:55.080  INFO 21196 --- [Thread-83] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:16:55.147  INFO 21196 --- [Thread-83] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2020-12-23 15:16:55.198  INFO 21196 --- [Thread-83] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2020-12-23 15:16:56.304  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:16:58.311  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:16:58.312  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:16:58.314  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:16:58.660  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:16:58.766  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90ms. Found 10 JPA repository interfaces.
2020-12-23 15:16:58.908  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:16:58.922  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:16:59.167  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:16:59.168  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:16:59.169  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:16:59.237  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:16:59.238  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 919 ms
2020-12-23 15:16:59.352  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:16:59.360  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2020-12-23 15:16:59.397  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2020-12-23 15:16:59.502  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:17:00.238  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:17:00.239  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:17:00.247  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:17:00.684  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:17:00.685  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:17:00.692  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:17:00.693  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:17:00.695  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:17:00.727  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:17:01.291  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:17:01.618  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.206 seconds (JVM running for 717.513)
2020-12-23 15:17:01.621  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:17:02.351  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:17:02.358  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:17:02.365  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 15:17:02.506  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:17:02.511  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:17:23.141  INFO 21196 --- [Thread-91] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:17:23.142  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:17:26.143  WARN 21196 --- [Thread-91] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:17:26.146  INFO 21196 --- [Thread-91] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:17:26.149  INFO 21196 --- [Thread-91] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2020-12-23 15:17:26.164  INFO 21196 --- [Thread-91] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2020-12-23 15:17:27.145  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:17:29.152  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:17:29.153  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:17:29.156  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:17:29.525  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:17:29.595  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 68ms. Found 10 JPA repository interfaces.
2020-12-23 15:17:29.827  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:17:29.850  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:17:30.305  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:17:30.385  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:17:30.410  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:17:30.508  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:17:30.517  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1356 ms
2020-12-23 15:17:30.734  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:17:30.753  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2020-12-23 15:17:30.784  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2020-12-23 15:17:30.789  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:17:31.468  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:17:31.555  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:17:31.748  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:17:33.113  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:17:33.297  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:17:33.458  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:17:33.548  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:17:33.597  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:17:33.681  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:17:34.653  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:17:35.288  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.877 seconds (JVM running for 751.183)
2020-12-23 15:17:35.296  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:17:36.015  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:17:36.017  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:17:36.024  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2020-12-23 15:17:36.162  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:17:36.174  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:17:51.932 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:18:15.758  INFO 21196 --- [Thread-99] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:18:15.759  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:18:18.759  WARN 21196 --- [Thread-99] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:18:18.761  INFO 21196 --- [Thread-99] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:18:18.765  INFO 21196 --- [Thread-99] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2020-12-23 15:18:18.795  INFO 21196 --- [Thread-99] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2020-12-23 15:18:20.248  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:18:22.259  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:18:22.260  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:18:22.262  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:18:22.719  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:18:22.875  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 153ms. Found 10 JPA repository interfaces.
2020-12-23 15:18:23.147 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:18:23.204  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:18:23.225  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:18:23.496  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:18:23.498  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:18:23.499  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:18:23.564  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:18:23.565  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1300 ms
2020-12-23 15:18:23.726  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:18:23.737  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Starting...
2020-12-23 15:18:23.757  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Start completed.
2020-12-23 15:18:23.758  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:18:24.315  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:18:24.317  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:18:24.326  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:18:25.258  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:18:25.259  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:18:25.266  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:18:25.267  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:18:25.267  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:18:25.304  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:18:25.948  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:18:26.470  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.446 seconds (JVM running for 802.365)
2020-12-23 15:18:26.473  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:18:27.200  INFO 21196 --- [Thread-107] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:18:27.203  INFO 21196 --- [Thread-107] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:18:27.205  INFO 21196 --- [Thread-107] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown initiated...
2020-12-23 15:18:27.218  INFO 21196 --- [Thread-107] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown completed.
2020-12-23 15:18:29.761 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@61e49189 > HttpResponse[HTTP/1.1 502 Bad Gateway]@668e4e8e] null
2020-12-23 15:18:29.960  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:18:29.961  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:18:29.974  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:18:30.794  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:18:32.801  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:18:32.802  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:18:32.804  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:18:33.095  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:18:33.148  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52ms. Found 10 JPA repository interfaces.
2020-12-23 15:18:33.262  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:18:33.275  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:18:33.481  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:18:33.483  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:18:33.487  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:18:33.598  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:18:33.598  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 791 ms
2020-12-23 15:18:33.684  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:18:33.692  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Starting...
2020-12-23 15:18:33.705  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Start completed.
2020-12-23 15:18:33.706  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:18:34.164  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:18:34.164  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:18:34.174  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:18:34.590  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:18:34.591  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:18:34.597  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:18:34.598  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:18:34.599  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:18:34.628  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:18:35.196  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:18:35.198  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:18:35.215  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:18:35.220  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 15:18:35.321  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 15:18:35.692  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.713 seconds (JVM running for 811.586)
2020-12-23 15:18:35.695  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:18:36.064  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:18:36.604  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:18:36.608  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:18:39.283  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 15:18:39.427  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:18:41.516  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.add
2020-12-23 15:18:41.665  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:18:43.425  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 15:18:43.574  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:19:15.764 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:20:44.968  INFO 21196 --- [Thread-115] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:20:44.969  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 15:20:47.969  WARN 21196 --- [Thread-115] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 15:20:47.972  INFO 21196 --- [Thread-115] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:20:47.973  INFO 21196 --- [Thread-115] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown initiated...
2020-12-23 15:20:47.992  INFO 21196 --- [Thread-115] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown completed.
2020-12-23 15:20:49.373  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 15:20:51.380  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 15:20:51.381  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 15:20:51.383  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 15:20:51.704  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 15:20:51.757  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52ms. Found 10 JPA repository interfaces.
2020-12-23 15:20:51.866  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 15:20:51.876  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 15:20:52.133  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 15:20:52.133  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 15:20:52.134  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 15:20:52.199  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 15:20:52.200  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 811 ms
2020-12-23 15:20:52.290  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 15:20:52.299  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Starting...
2020-12-23 15:20:52.318  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Start completed.
2020-12-23 15:20:52.320  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 15:20:52.751  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 15:20:52.752  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 15:20:52.765  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 15:20:53.134  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 15:20:53.135  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 15:20:53.142  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 15:20:53.142  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 15:20:53.143  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 15:20:53.170  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 15:20:53.779  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 15:20:54.132  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.867 seconds (JVM running for 950.026)
2020-12-23 15:20:54.134  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 15:20:54.923  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 15:20:54.925  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 15:20:54.931  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 15:20:55.066  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 15:20:55.071  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 15:21:21.055  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 15:21:21.206  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:23.222  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 15:21:23.349  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:24.482  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.add
2020-12-23 15:21:24.646  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:26.641  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 15:21:26.776  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:28.548  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.delete
2020-12-23 15:21:28.689  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:28.814  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:30.255  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 15:21:30.385  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:31.978  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 15:21:32.109  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:33.596  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 15:21:33.725  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:35.961  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 15:21:36.096  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:37.212  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 15:21:37.375  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:39.852  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 15:21:40.013  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:41.026  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 15:21:41.183  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:43.056  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 15:21:43.184  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:44.975 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 15:21:45.959  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 15:21:46.088  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:47.769  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 15:21:47.908  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:49.355  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 15:21:49.501  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:52.593  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.updateCars
2020-12-23 15:21:53.236  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 15:21:53.362  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:51:29.334  INFO 21196 --- [Thread-123] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:29.340  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 16:51:32.341  WARN 21196 --- [Thread-123] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 16:51:32.426  INFO 21196 --- [Thread-123] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:51:32.480  INFO 21196 --- [Thread-123] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown initiated...
2020-12-23 16:51:32.493  INFO 21196 --- [Thread-123] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown completed.
2020-12-23 16:51:34.114  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:51:36.156  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:51:36.157  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:51:36.159  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:51:37.069  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:51:37.446  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 355ms. Found 10 JPA repository interfaces.
2020-12-23 16:51:37.815  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:51:37.872  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:51:38.409  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:51:38.411  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:51:38.412  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:51:38.533  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:51:38.534  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2358 ms
2020-12-23 16:51:38.758  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:51:38.810  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Starting...
2020-12-23 16:51:38.834  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Start completed.
2020-12-23 16:51:38.835  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:51:41.944  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:51:41.945  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:51:41.957  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:51:43.041  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:51:43.043  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:43.055  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:51:43.056  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:51:43.057  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:51:43.121  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:51:44.099  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:51:44.593  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.749 seconds (JVM running for 6400.488)
2020-12-23 16:51:44.596  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:51:45.275  INFO 21196 --- [Thread-131] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:45.278  INFO 21196 --- [Thread-131] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:51:45.284  INFO 21196 --- [Thread-131] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown initiated...
2020-12-23 16:51:45.299  INFO 21196 --- [Thread-131] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown completed.
2020-12-23 16:51:47.971 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@1bc6fa1a > HttpResponse[HTTP/1.1 502 Bad Gateway]@214ed94b] null
2020-12-23 16:51:48.117  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:51:48.119  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:48.127  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:51:48.146 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'spring.datasource-org.springframework.boot.autoconfigure.jdbc.DataSourceProperties': Could not bind properties to 'DataSourceProperties' : prefix=spring.datasource, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is java.lang.IllegalStateException: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@443b24e4 has been closed already
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.bind(ConfigurationPropertiesBindingPostProcessor.java:92) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization(ConfigurationPropertiesBindingPostProcessor.java:78) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:415) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolvePreparedArguments(ConstructorResolver.java:831) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:446) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolvePreparedArguments(ConstructorResolver.java:831) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:151) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:408) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1175) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:420) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:482) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:336) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@443b24e4 has been closed already
	at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive(AbstractApplicationContext.java:1093) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1114) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.boot.context.properties.BoundConfigurationProperties.get(BoundConfigurationProperties.java:78) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.getHandler(ConfigurationPropertiesBinder.java:127) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.getBindHandler(ConfigurationPropertiesBinder.java:109) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.bind(ConfigurationPropertiesBinder.java:89) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.bind(ConfigurationPropertiesBindingPostProcessor.java:89) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	... 69 common frames omitted

2020-12-23 16:51:49.030  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:51:51.037  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:51:51.040  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:51:51.041  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:51:51.451  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:51:51.525  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73ms. Found 10 JPA repository interfaces.
2020-12-23 16:51:51.632  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:51:51.641  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:51:51.848  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:51:51.850  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:51:51.851  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:51:51.899  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:51:51.899  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 836 ms
2020-12-23 16:51:52.011  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:51:52.020  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Starting...
2020-12-23 16:51:52.061  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Start completed.
2020-12-23 16:51:52.062  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:51:52.655  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:51:52.656  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:51:52.664  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:51:53.052  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:51:53.054  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:53.072  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:51:53.073  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:51:53.074  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:51:53.120  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:51:53.737  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:51:54.072  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.933 seconds (JVM running for 6409.968)
2020-12-23 16:51:54.076  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:51:54.929  INFO 21196 --- [Thread-139] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:54.931  INFO 21196 --- [Thread-139] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:51:54.933  INFO 21196 --- [Thread-139] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown initiated...
2020-12-23 16:51:54.949  INFO 21196 --- [Thread-139] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown completed.
2020-12-23 16:51:54.998 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@6c20010b > HttpResponse[HTTP/1.1 503 Service Unavailable]@65d21a2a] null
2020-12-23 16:51:55.147  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:51:55.148  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:51:55.151  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:51:55.159 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'spring.datasource-org.springframework.boot.autoconfigure.jdbc.DataSourceProperties': Could not bind properties to 'DataSourceProperties' : prefix=spring.datasource, ignoreInvalidFields=false, ignoreUnknownFields=true; nested exception is java.lang.IllegalStateException: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@65ff55f6 has been closed already
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.bind(ConfigurationPropertiesBindingPostProcessor.java:92) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization(ConfigurationPropertiesBindingPostProcessor.java:78) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:415) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolvePreparedArguments(ConstructorResolver.java:831) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:446) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1307) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:884) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.resolvePreparedArguments(ConstructorResolver.java:831) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:151) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1356) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1192) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:408) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1176) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1175) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:420) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:482) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:336) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@65ff55f6 has been closed already
	at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive(AbstractApplicationContext.java:1093) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1114) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.boot.context.properties.BoundConfigurationProperties.get(BoundConfigurationProperties.java:78) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.getHandler(ConfigurationPropertiesBinder.java:127) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.getBindHandler(ConfigurationPropertiesBinder.java:109) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBinder.bind(ConfigurationPropertiesBinder.java:89) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.bind(ConfigurationPropertiesBindingPostProcessor.java:89) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	... 69 common frames omitted

2020-12-23 16:51:56.136  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:51:58.164  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:51:58.182  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:51:58.211  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:51:59.168  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:51:59.255  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 86ms. Found 10 JPA repository interfaces.
2020-12-23 16:51:59.415  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:51:59.428  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:51:59.626  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:51:59.627  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:51:59.628  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:51:59.680  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:51:59.681  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1460 ms
2020-12-23 16:51:59.828  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:51:59.836  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Starting...
2020-12-23 16:51:59.859  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Start completed.
2020-12-23 16:51:59.861  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:52:00.448  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:52:00.449  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:52:00.460  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:52:00.862  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:52:00.863  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:52:00.869  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:52:00.869  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:52:00.870  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:52:00.908  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:52:01.673  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:52:02.609  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.454 seconds (JVM running for 6418.504)
2020-12-23 16:52:02.623  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:52:02.929  INFO 21196 --- [Thread-147] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:52:02.931  INFO 21196 --- [Thread-147] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:52:02.932  INFO 21196 --- [Thread-147] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown initiated...
2020-12-23 16:52:02.938  INFO 21196 --- [Thread-147] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown completed.
2020-12-23 16:52:05.821 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@fbdcf2e > HttpResponse[HTTP/1.1 502 Bad Gateway]@109b6a20] null
2020-12-23 16:52:05.962  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:52:05.962  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:52:05.966  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:52:06.622  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:52:08.628  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:52:08.629  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:52:08.640  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:52:08.924  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:52:09.011  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 85ms. Found 10 JPA repository interfaces.
2020-12-23 16:52:09.178  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:52:09.198  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:52:09.446  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:52:09.447  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:52:09.448  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:52:09.504  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:52:09.504  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 851 ms
2020-12-23 16:52:09.591  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:52:09.616  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Starting...
2020-12-23 16:52:09.637  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Start completed.
2020-12-23 16:52:09.638  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:52:10.132  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:52:10.132  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:52:10.144  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:52:10.430  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:52:10.431  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:52:10.436  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:52:10.442  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:52:10.443  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:52:10.467  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:52:10.955  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:52:11.267  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.299 seconds (JVM running for 6427.162)
2020-12-23 16:52:11.270  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:52:12.099  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 16:52:12.101  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 16:52:12.106  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 16:52:12.252  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 16:52:12.256  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:52:12.973  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 16:52:13.763  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:13.907  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:16.728  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 16:52:16.859  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:19.548  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 16:52:19.718  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:21.084  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 16:52:21.224  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:23.208  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 16:52:23.343  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:52:29.346 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 16:53:13.928  INFO 21196 --- [Thread-155] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:53:13.937  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 16:53:16.938  WARN 21196 --- [Thread-155] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 16:53:16.942  INFO 21196 --- [Thread-155] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:53:16.943  INFO 21196 --- [Thread-155] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown initiated...
2020-12-23 16:53:17.022  INFO 21196 --- [Thread-155] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown completed.
2020-12-23 16:53:18.178  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:53:20.187  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:53:20.193  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:53:20.195  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:53:20.659  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:53:20.726  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 66ms. Found 10 JPA repository interfaces.
2020-12-23 16:53:20.934  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:53:20.944  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:53:21.175  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:53:21.176  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:53:21.176  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:53:21.230  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:53:21.232  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1027 ms
2020-12-23 16:53:21.494  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:53:21.533  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Starting...
2020-12-23 16:53:21.770  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Start completed.
2020-12-23 16:53:21.770  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:53:22.309  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:53:22.310  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:53:22.323  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:53:22.754  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:53:22.756  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:53:22.763  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:53:22.764  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:53:22.765  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:53:22.795  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:53:23.343  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:53:23.804  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.564 seconds (JVM running for 6499.699)
2020-12-23 16:53:23.807  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:53:24.594  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 16:53:24.595  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 16:53:24.601  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 16:53:24.736  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 16:53:24.745  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:54:13.947 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 16:57:59.125  INFO 21196 --- [Thread-163] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:57:59.126  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 16:58:02.126  WARN 21196 --- [Thread-163] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 16:58:02.128  INFO 21196 --- [Thread-163] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:58:02.140  INFO 21196 --- [Thread-163] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown initiated...
2020-12-23 16:58:02.146  INFO 21196 --- [Thread-163] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown completed.
2020-12-23 16:58:03.009  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 16:58:05.017  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 16:58:05.018  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 16:58:05.023  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 16:58:05.369  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 16:58:05.421  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51ms. Found 10 JPA repository interfaces.
2020-12-23 16:58:05.520  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 16:58:05.535  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 16:58:05.773  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 16:58:05.774  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 16:58:05.774  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 16:58:05.836  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 16:58:05.836  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 795 ms
2020-12-23 16:58:05.952  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 16:58:05.964  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Starting...
2020-12-23 16:58:05.995  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Start completed.
2020-12-23 16:58:05.996  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 16:58:06.463  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 16:58:06.464  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:58:06.473  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 16:58:06.833  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 16:58:06.834  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:58:06.841  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 16:58:06.847  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 16:58:06.848  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 16:58:06.873  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 16:58:07.366  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 16:58:07.698  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.388 seconds (JVM running for 6783.593)
2020-12-23 16:58:07.701  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 16:58:08.500  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 16:58:08.502  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 16:58:08.507  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 16:58:08.662  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 16:58:08.668  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 16:58:10.524  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 16:58:10.694  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:13.229  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 16:58:13.389  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:15.370  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.edit
2020-12-23 16:58:15.784  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:15.908  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:18.665  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 16:58:18.802  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:25.371  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.showMessageButton
2020-12-23 16:58:25.545  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:25.674  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:27.957  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.editTextButton
2020-12-23 16:58:28.087  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:28.243  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:30.524  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 16:58:30.716  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:32.533  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.listButton
2020-12-23 16:58:32.756  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:32.903  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:36.564  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.deleteButton
2020-12-23 16:58:36.765  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:36.908  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:38.548  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 16:58:38.679  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:40.024  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.addButton
2020-12-23 16:58:40.172  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 16:58:59.130 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 16:59:53.654  INFO 21196 --- [Thread-171] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 16:59:53.672  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 16:59:56.672  WARN 21196 --- [Thread-171] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 16:59:56.674  INFO 21196 --- [Thread-171] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 16:59:56.702  INFO 21196 --- [Thread-171] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown initiated...
2020-12-23 16:59:56.718  INFO 21196 --- [Thread-171] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown completed.
2020-12-23 16:59:58.689  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:00:00.976  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:00:00.977  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:00:00.978  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:00:01.668  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:00:01.913  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 218ms. Found 10 JPA repository interfaces.
2020-12-23 17:00:02.124  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:00:02.141  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:00:02.439  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:00:02.442  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:00:02.486  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:00:02.561  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:00:02.565  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1561 ms
2020-12-23 17:00:02.796  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:00:02.832  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-23 - Starting...
2020-12-23 17:00:02.871  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-23 - Start completed.
2020-12-23 17:00:02.874  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:00:03.663  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:00:03.665  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:00:03.678  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:00:04.422  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:00:04.423  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:00:04.509  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:00:04.510  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:00:04.511  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:00:04.571  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:00:06.021  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:00:07.356  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 10.36 seconds (JVM running for 6903.251)
2020-12-23 17:00:07.361  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:00:08.154  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:00:08.159  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:00:08.186  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 17:00:08.334  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:00:08.352  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:00:41.913  INFO 21196 --- [Thread-179] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:00:41.915  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:00:44.918  WARN 21196 --- [Thread-179] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:00:44.922  INFO 21196 --- [Thread-179] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:00:44.946  INFO 21196 --- [Thread-179] com.zaxxer.hikari.HikariDataSource       : HikariPool-23 - Shutdown initiated...
2020-12-23 17:00:44.953  INFO 21196 --- [Thread-179] com.zaxxer.hikari.HikariDataSource       : HikariPool-23 - Shutdown completed.
2020-12-23 17:00:46.126  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:00:48.146  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:00:48.147  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:00:48.149  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:00:48.695  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:00:48.803  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 106ms. Found 10 JPA repository interfaces.
2020-12-23 17:00:48.984  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:00:48.999  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:00:49.279  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:00:49.281  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:00:49.282  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:00:49.343  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:00:49.344  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1163 ms
2020-12-23 17:00:49.538  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:00:49.559  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-24 - Starting...
2020-12-23 17:00:49.583  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-24 - Start completed.
2020-12-23 17:00:49.584  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:00:50.166  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:00:50.167  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:00:50.180  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:00:50.745  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:00:50.746  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:00:50.756  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:00:50.767  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:00:50.768  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:00:50.809  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:00:51.716  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:00:52.696  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.546 seconds (JVM running for 6948.591)
2020-12-23 17:00:52.700  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:00:53.436  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:00:53.438  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:00:53.444  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:00:53.587  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:00:53.614  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:00:53.678 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:01:00.679  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:01:00.974  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:06.624  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.addButton
2020-12-23 17:01:06.813  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:22.526  INFO 21196 --- [Thread-187] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:01:22.526  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:01:25.528  WARN 21196 --- [Thread-187] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:01:25.528  INFO 21196 --- [Thread-187] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:01:25.532  INFO 21196 --- [Thread-187] com.zaxxer.hikari.HikariDataSource       : HikariPool-24 - Shutdown initiated...
2020-12-23 17:01:25.538  INFO 21196 --- [Thread-187] com.zaxxer.hikari.HikariDataSource       : HikariPool-24 - Shutdown completed.
2020-12-23 17:01:26.498  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:01:28.510  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:01:28.697  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:01:28.722  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:01:28.981  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:01:29.038  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55ms. Found 10 JPA repository interfaces.
2020-12-23 17:01:29.126  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:01:29.133  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:01:29.360  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:01:29.421  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:01:29.448  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:01:29.530  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:01:29.530  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 799 ms
2020-12-23 17:01:29.611  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:01:29.618  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-25 - Starting...
2020-12-23 17:01:29.646  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-25 - Start completed.
2020-12-23 17:01:29.647  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:01:30.000  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:01:30.001  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:01:30.010  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:01:30.526  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:01:30.527  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:01:30.548  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:01:30.550  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:01:30.550  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:01:30.582  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:01:31.100  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:01:31.409  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.668 seconds (JVM running for 6987.305)
2020-12-23 17:01:31.413  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:01:32.141  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:01:32.143  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:01:32.146  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2020-12-23 17:01:32.285  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:01:32.290  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:01:33.331  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:01:33.625  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:35.381  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.addButton
2020-12-23 17:01:35.556  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:37.614  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:01:37.748  INFO 21196 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:39.592  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.deleteButton
2020-12-23 17:01:39.739  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:39.865  INFO 21196 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:41.355  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:01:41.491  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:01:41.921 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:01:43.733  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:01:43.879  INFO 21196 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:02:22.531 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:03:13.010  INFO 21196 --- [Thread-195] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:03:13.011  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:03:16.011  WARN 21196 --- [Thread-195] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:03:16.015  INFO 21196 --- [Thread-195] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:03:16.018  INFO 21196 --- [Thread-195] com.zaxxer.hikari.HikariDataSource       : HikariPool-25 - Shutdown initiated...
2020-12-23 17:03:16.032  INFO 21196 --- [Thread-195] com.zaxxer.hikari.HikariDataSource       : HikariPool-25 - Shutdown completed.
2020-12-23 17:03:17.623  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:03:19.665  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:03:19.666  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:03:19.668  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:03:19.953  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:03:20.014  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60ms. Found 10 JPA repository interfaces.
2020-12-23 17:03:20.148  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:03:20.160  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:03:20.627  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:03:20.628  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:03:20.629  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:03:20.669  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:03:20.669  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 995 ms
2020-12-23 17:03:20.750  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:03:20.760  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-26 - Starting...
2020-12-23 17:03:20.777  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-26 - Start completed.
2020-12-23 17:03:20.777  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:03:21.220  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:03:21.220  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:03:21.248  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:03:21.698  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:03:21.725  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:03:21.734  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:03:21.735  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:03:21.736  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:03:21.778  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:03:22.396  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:03:22.819  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.554 seconds (JVM running for 7098.714)
2020-12-23 17:03:22.826  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:03:23.545  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:03:23.548  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:03:23.552  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:03:23.686  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:03:23.691  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:03:43.688  INFO 21196 --- [Thread-203] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:03:43.704  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:03:46.706  WARN 21196 --- [Thread-203] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:03:46.720  INFO 21196 --- [Thread-203] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:03:46.722  INFO 21196 --- [Thread-203] com.zaxxer.hikari.HikariDataSource       : HikariPool-26 - Shutdown initiated...
2020-12-23 17:03:46.729  INFO 21196 --- [Thread-203] com.zaxxer.hikari.HikariDataSource       : HikariPool-26 - Shutdown completed.
2020-12-23 17:03:48.888  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:03:50.896  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:03:50.897  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:03:50.898  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:03:51.428  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:03:51.550  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 120ms. Found 10 JPA repository interfaces.
2020-12-23 17:03:51.810  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:03:51.829  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:03:52.259  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:03:52.260  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:03:52.261  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:03:52.335  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:03:52.336  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1430 ms
2020-12-23 17:03:52.496  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:03:52.508  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Starting...
2020-12-23 17:03:52.539  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Start completed.
2020-12-23 17:03:52.540  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:03:53.189  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:03:53.193  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:03:53.223  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:03:54.052  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:03:54.054  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:03:54.069  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:03:54.070  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:03:54.071  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:03:54.114  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:03:54.822  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:03:55.261  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.297 seconds (JVM running for 7131.156)
2020-12-23 17:03:55.263  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:03:56.047  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:03:56.049  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:03:56.054  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:03:56.191  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:03:56.198  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:04:13.018 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:04:18.727  INFO 21196 --- [Thread-211] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:04:18.727  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:04:21.728  WARN 21196 --- [Thread-211] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:04:21.729  INFO 21196 --- [Thread-211] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:04:21.741  INFO 21196 --- [Thread-211] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Shutdown initiated...
2020-12-23 17:04:21.745  INFO 21196 --- [Thread-211] com.zaxxer.hikari.HikariDataSource       : HikariPool-27 - Shutdown completed.
2020-12-23 17:04:22.607  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:04:24.612  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:04:24.613  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:04:24.614  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:04:24.894  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:04:24.957  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62ms. Found 10 JPA repository interfaces.
2020-12-23 17:04:25.067  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:04:25.075  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:04:25.268  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:04:25.269  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:04:25.269  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:04:25.315  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:04:25.315  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 686 ms
2020-12-23 17:04:25.410  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:04:25.418  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Starting...
2020-12-23 17:04:25.440  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Start completed.
2020-12-23 17:04:25.441  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:04:25.822  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:04:25.823  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:04:25.833  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:04:26.189  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:04:26.190  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:04:26.198  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:04:26.204  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:04:26.205  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:04:26.237  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:04:26.905  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:04:27.231  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.265 seconds (JVM running for 7163.126)
2020-12-23 17:04:27.233  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:04:27.954  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:04:27.956  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:04:27.958  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2020-12-23 17:04:28.106  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:04:28.110  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:04:29.226  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:04:29.389  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:31.474  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:04:31.606  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:43.710 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:04:45.540  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:04:45.684  INFO 21196 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:48.221  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.updateCars
2020-12-23 17:04:48.501  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:48.623  INFO 21196 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:50.256  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:04:50.439  INFO 21196 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:52.121  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 17:04:52.261  INFO 21196 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:53.649  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:04:53.782  INFO 21196 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:04:55.362  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 17:04:55.518  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:05:18.732 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:06:24.472  INFO 21196 --- [Thread-219] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:06:24.475  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:06:27.477  WARN 21196 --- [Thread-219] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:06:27.510  INFO 21196 --- [Thread-219] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:06:27.513  INFO 21196 --- [Thread-219] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Shutdown initiated...
2020-12-23 17:06:27.564  INFO 21196 --- [Thread-219] com.zaxxer.hikari.HikariDataSource       : HikariPool-28 - Shutdown completed.
2020-12-23 17:06:31.824  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:06:34.314  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:06:34.356  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:06:34.358  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:06:35.667  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:06:36.036  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 282ms. Found 10 JPA repository interfaces.
2020-12-23 17:06:36.334  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:06:36.400  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:06:36.749  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:06:36.788  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:06:36.795  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:06:36.897  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:06:36.927  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2560 ms
2020-12-23 17:06:37.507  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:06:37.535  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Starting...
2020-12-23 17:06:37.618  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Start completed.
2020-12-23 17:06:37.624  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:06:38.551  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:06:38.591  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:06:38.606  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:06:39.545  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:06:39.568  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:06:39.602  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:06:39.621  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:06:39.634  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:06:39.727  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:06:41.806  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:06:43.455  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 15.633 seconds (JVM running for 7299.349)
2020-12-23 17:06:43.485  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:06:44.411  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:06:44.413  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:06:44.418  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:06:44.589  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:06:44.729  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:06:47.169  INFO 21196 --- [Thread-227] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:06:47.170  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:06:50.172  WARN 21196 --- [Thread-227] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:06:50.173  INFO 21196 --- [Thread-227] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:06:50.187  INFO 21196 --- [Thread-227] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Shutdown initiated...
2020-12-23 17:06:50.193  INFO 21196 --- [Thread-227] com.zaxxer.hikari.HikariDataSource       : HikariPool-29 - Shutdown completed.
2020-12-23 17:06:51.471  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:06:53.477  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:06:53.478  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:06:53.479  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:06:53.830  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:06:53.899  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 67ms. Found 10 JPA repository interfaces.
2020-12-23 17:06:54.065  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:06:54.080  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:06:54.323  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:06:54.324  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:06:54.324  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:06:54.405  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:06:54.405  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 904 ms
2020-12-23 17:06:54.498  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:06:54.506  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Starting...
2020-12-23 17:06:54.539  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Start completed.
2020-12-23 17:06:54.540  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:06:54.987  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:06:54.988  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:06:54.998  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:06:55.408  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:06:55.409  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:06:55.416  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:06:55.425  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:06:55.426  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:06:55.511  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:06:56.131  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:06:56.552  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.108 seconds (JVM running for 7312.447)
2020-12-23 17:06:56.556  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:06:57.287  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:06:57.290  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:06:57.303  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2020-12-23 17:06:57.453  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:06:57.458  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:07:00.718  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.postponeMessage
2020-12-23 17:07:00.881  INFO 21196 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:07:05.222  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: Oooooo
2020-12-23 17:07:07.353  INFO 21196 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:07:24.491 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:07:37.743  INFO 21196 --- [Thread-235] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:07:37.764  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:07:40.766  WARN 21196 --- [Thread-235] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:07:40.770  INFO 21196 --- [Thread-235] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:07:40.774  INFO 21196 --- [Thread-235] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Shutdown initiated...
2020-12-23 17:07:40.816  INFO 21196 --- [Thread-235] com.zaxxer.hikari.HikariDataSource       : HikariPool-30 - Shutdown completed.
2020-12-23 17:07:43.611  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:07:45.706  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:07:45.743  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:07:45.745  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:07:46.559  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:07:46.788  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 205ms. Found 10 JPA repository interfaces.
2020-12-23 17:07:47.085  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:07:47.096  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:07:47.176 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:07:47.440  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:07:47.504  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:07:47.526  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:07:47.576  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:07:47.577  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1827 ms
2020-12-23 17:07:47.703  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:07:47.714  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Starting...
2020-12-23 17:07:47.779  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Start completed.
2020-12-23 17:07:47.780  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:07:48.522  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:07:48.662  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:07:48.681  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:07:49.606  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:07:49.607  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:07:49.618  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:07:49.619  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:07:49.620  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:07:49.664  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:07:50.323  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:07:50.657  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 9.551 seconds (JVM running for 7366.552)
2020-12-23 17:07:50.660  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:07:51.401  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:07:51.402  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:07:51.406  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:07:51.540  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:07:51.545  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:08:09.138  INFO 21196 --- [Thread-243] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:09.140  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:08:12.177  WARN 21196 --- [Thread-243] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:08:12.387  INFO 21196 --- [Thread-243] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:12.473  INFO 21196 --- [Thread-243] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Shutdown initiated...
2020-12-23 17:08:12.510  INFO 21196 --- [Thread-243] com.zaxxer.hikari.HikariDataSource       : HikariPool-31 - Shutdown completed.
2020-12-23 17:08:14.590  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:08:16.600  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:08:16.601  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:08:16.603  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:08:17.305  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:08:17.384  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 77ms. Found 10 JPA repository interfaces.
2020-12-23 17:08:17.573  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:08:17.640  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:08:18.005  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:08:18.006  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:08:18.007  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:08:18.056  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:08:18.057  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1448 ms
2020-12-23 17:08:18.158  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:08:18.170  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Starting...
2020-12-23 17:08:18.229  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Start completed.
2020-12-23 17:08:18.230  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:08:18.865  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:08:18.868  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:18.886  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:08:19.848  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:08:19.849  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:19.860  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:08:19.873  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:08:19.874  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:08:19.953  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:08:21.089  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:08:21.696  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.716 seconds (JVM running for 7397.591)
2020-12-23 17:08:21.709  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:08:22.259  INFO 21196 --- [Thread-251] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:22.262  INFO 21196 --- [Thread-251] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:22.264  INFO 21196 --- [Thread-251] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Shutdown initiated...
2020-12-23 17:08:22.273  INFO 21196 --- [Thread-251] com.zaxxer.hikari.HikariDataSource       : HikariPool-32 - Shutdown completed.
2020-12-23 17:08:25.907 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@34504070 > HttpResponse[HTTP/1.1 502 Bad Gateway]@53082b63] null
2020-12-23 17:08:26.184  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:08:26.196  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:26.209  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:08:27.732  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:08:29.736  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:08:29.737  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:08:29.738  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:08:30.105  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:08:30.194  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 78ms. Found 10 JPA repository interfaces.
2020-12-23 17:08:30.326  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:08:30.338  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:08:30.555  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:08:30.557  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:08:30.557  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:08:30.599  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:08:30.600  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 857 ms
2020-12-23 17:08:30.677  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:08:30.684  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Starting...
2020-12-23 17:08:30.707  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Start completed.
2020-12-23 17:08:30.707  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:08:31.164  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:08:31.165  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:31.176  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:08:31.496  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:08:31.497  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:31.504  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:08:31.505  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:08:31.505  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:08:31.530  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:08:32.123  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:08:32.574  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.359 seconds (JVM running for 7408.469)
2020-12-23 17:08:32.578  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:08:33.385  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:08:33.387  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:08:33.390  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2020-12-23 17:08:33.526  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:08:33.530  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:08:37.770 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:08:41.554  INFO 21196 --- [Thread-259] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:41.555  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:08:44.556  WARN 21196 --- [Thread-259] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:08:44.558  INFO 21196 --- [Thread-259] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:44.560  INFO 21196 --- [Thread-259] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Shutdown initiated...
2020-12-23 17:08:44.564  INFO 21196 --- [Thread-259] com.zaxxer.hikari.HikariDataSource       : HikariPool-33 - Shutdown completed.
2020-12-23 17:08:45.481  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:08:47.497  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:08:47.498  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:08:47.500  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:08:47.755  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:08:47.815  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58ms. Found 10 JPA repository interfaces.
2020-12-23 17:08:47.914  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:08:47.924  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:08:48.075  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:08:48.076  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:08:48.076  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:08:48.117  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:08:48.118  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 615 ms
2020-12-23 17:08:48.219  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:08:48.228  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Starting...
2020-12-23 17:08:48.243  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Start completed.
2020-12-23 17:08:48.243  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:08:48.669  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:08:48.670  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:08:48.679  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:08:49.127  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:08:49.127  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:49.132  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:08:49.133  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:08:49.133  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:08:49.157  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:08:49.583  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:08:49.893  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.083 seconds (JVM running for 7425.788)
2020-12-23 17:08:49.896  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:08:50.571  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:08:50.572  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:08:50.575  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2020-12-23 17:08:50.748  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:08:50.752  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:08:58.301  INFO 21196 --- [Thread-267] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:08:58.302  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:09:01.304  WARN 21196 --- [Thread-267] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:09:01.349  INFO 21196 --- [Thread-267] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:09:01.352  INFO 21196 --- [Thread-267] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Shutdown initiated...
2020-12-23 17:09:01.357  INFO 21196 --- [Thread-267] com.zaxxer.hikari.HikariDataSource       : HikariPool-34 - Shutdown completed.
2020-12-23 17:09:02.449  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:09:04.453  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:09:04.454  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:09:04.455  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:09:04.877  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:09:04.930  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51ms. Found 10 JPA repository interfaces.
2020-12-23 17:09:05.158  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:09:05.186  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:09:05.624  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:09:05.625  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:09:05.626  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:09:05.669  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:09:05.670  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1202 ms
2020-12-23 17:09:05.750  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:09:05.760  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Starting...
2020-12-23 17:09:05.774  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Start completed.
2020-12-23 17:09:05.775  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:09:06.212  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:09:06.212  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:09:06.223  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:09:06.596  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:09:06.597  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:09:06.602  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:09:06.603  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:09:06.604  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:09:06.633  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:09:07.276  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:09:07.634  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.971 seconds (JVM running for 7443.528)
2020-12-23 17:09:07.636  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:09:08.404  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:09:08.407  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:09:08.414  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:09:08.552  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:09:08.561  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:09:09.145 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:09:36.307  INFO 21196 --- [Thread-275] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:09:36.308  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:09:39.309  WARN 21196 --- [Thread-275] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:09:39.311  INFO 21196 --- [Thread-275] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:09:39.312  INFO 21196 --- [Thread-275] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Shutdown initiated...
2020-12-23 17:09:39.318  INFO 21196 --- [Thread-275] com.zaxxer.hikari.HikariDataSource       : HikariPool-35 - Shutdown completed.
2020-12-23 17:09:40.333  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:09:41.559 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:09:42.345  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:09:42.345  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:09:42.347  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:09:42.898  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:09:42.969  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69ms. Found 10 JPA repository interfaces.
2020-12-23 17:09:43.127  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:09:43.139  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:09:43.435  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:09:43.437  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:09:43.438  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:09:43.535  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:09:43.536  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1184 ms
2020-12-23 17:09:43.786  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:09:43.811  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Starting...
2020-12-23 17:09:44.142  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Start completed.
2020-12-23 17:09:44.143  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:09:44.650  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:09:44.651  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:09:44.660  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:09:45.042  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:09:45.043  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:09:45.052  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:09:45.054  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:09:45.054  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:09:45.095  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:09:45.824  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:09:46.234  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.61 seconds (JVM running for 7482.129)
2020-12-23 17:09:46.236  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:09:46.940  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:09:46.941  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:09:46.945  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:09:47.077  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:09:47.082  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:09:58.307 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:10:36.313 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:11:46.407  INFO 21196 --- [Thread-283] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:11:46.408  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:11:49.409  WARN 21196 --- [Thread-283] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:11:49.411  INFO 21196 --- [Thread-283] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:11:49.416  INFO 21196 --- [Thread-283] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Shutdown initiated...
2020-12-23 17:11:49.424  INFO 21196 --- [Thread-283] com.zaxxer.hikari.HikariDataSource       : HikariPool-36 - Shutdown completed.
2020-12-23 17:11:51.165  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:11:53.175  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:11:53.176  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:11:53.179  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:11:53.595  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:11:53.683  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 87ms. Found 10 JPA repository interfaces.
2020-12-23 17:11:53.841  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:11:53.855  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:11:54.184  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:11:54.184  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:11:54.186  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:11:54.286  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:11:54.287  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1104 ms
2020-12-23 17:11:54.568  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:11:54.606  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Starting...
2020-12-23 17:11:54.654  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Start completed.
2020-12-23 17:11:54.660  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:11:55.573  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:11:55.708  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:11:55.780  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:11:56.573  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:11:56.574  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:11:56.584  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:11:56.586  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:11:56.595  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:11:56.677  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:11:57.483  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:11:58.524  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.721 seconds (JVM running for 7614.419)
2020-12-23 17:11:58.528  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:11:59.353  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:11:59.361  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:11:59.366  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:11:59.503  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:11:59.521  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:12:16.417  INFO 21196 --- [Thread-291] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:12:16.421  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:12:19.435  WARN 21196 --- [Thread-291] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:12:19.614  INFO 21196 --- [Thread-291] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:12:19.689  INFO 21196 --- [Thread-291] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Shutdown initiated...
2020-12-23 17:12:19.697  INFO 21196 --- [Thread-291] com.zaxxer.hikari.HikariDataSource       : HikariPool-37 - Shutdown completed.
2020-12-23 17:12:22.876  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:12:25.238  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:12:25.239  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:12:25.240  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:12:25.875  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:12:26.056  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 169ms. Found 10 JPA repository interfaces.
2020-12-23 17:12:26.367  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:12:26.385  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:12:26.806  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:12:26.822  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:12:26.842  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:12:26.966  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:12:26.979  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1733 ms
2020-12-23 17:12:28.857  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:12:28.898  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Starting...
2020-12-23 17:12:28.966  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Start completed.
2020-12-23 17:12:28.966  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:12:30.817  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:12:30.826  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:12:30.838  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:12:31.784  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:12:31.812  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:12:31.829  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:12:31.836  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:12:31.859  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:12:31.930  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:12:34.363  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:12:35.151  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 15.084 seconds (JVM running for 7651.046)
2020-12-23 17:12:35.156  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:12:35.919  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:12:36.044  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:12:36.052  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:12:36.226  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:12:36.244  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:12:46.414 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:13:01.167  INFO 21196 --- [Thread-299] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:13:01.168  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:13:04.169  WARN 21196 --- [Thread-299] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:13:04.171  INFO 21196 --- [Thread-299] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:13:04.175  INFO 21196 --- [Thread-299] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Shutdown initiated...
2020-12-23 17:13:04.183  INFO 21196 --- [Thread-299] com.zaxxer.hikari.HikariDataSource       : HikariPool-38 - Shutdown completed.
2020-12-23 17:13:05.960  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:13:07.968  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:13:07.968  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:13:07.970  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:13:08.334  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:13:08.407  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73ms. Found 10 JPA repository interfaces.
2020-12-23 17:13:08.592  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:13:08.669  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:13:09.066  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:13:09.077  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:13:09.086  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:13:09.154  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:13:09.158  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1184 ms
2020-12-23 17:13:09.328  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:13:09.339  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-39 - Starting...
2020-12-23 17:13:09.357  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-39 - Start completed.
2020-12-23 17:13:09.358  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:13:09.939  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:13:09.944  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:13:09.962  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:13:10.810  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:13:10.820  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:13:10.830  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:13:10.837  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:13:10.850  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:13:10.919  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:13:12.248  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:13:13.793  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 9.278 seconds (JVM running for 7689.687)
2020-12-23 17:13:13.798  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:13:14.518  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:13:14.519  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:13:14.523  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:13:14.680  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:13:14.684  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:13:16.425 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:13:19.675  INFO 21196 --- [Thread-307] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:13:19.681  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:13:22.681  WARN 21196 --- [Thread-307] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:13:22.683  INFO 21196 --- [Thread-307] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:13:22.684  INFO 21196 --- [Thread-307] com.zaxxer.hikari.HikariDataSource       : HikariPool-39 - Shutdown initiated...
2020-12-23 17:13:22.692  INFO 21196 --- [Thread-307] com.zaxxer.hikari.HikariDataSource       : HikariPool-39 - Shutdown completed.
2020-12-23 17:13:24.113  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:13:26.135  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:13:26.173  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:13:26.207  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:13:26.678  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:13:26.861  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 98ms. Found 10 JPA repository interfaces.
2020-12-23 17:13:27.079  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:13:27.107  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:13:27.482  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:13:27.555  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:13:27.556  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:13:27.611  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:13:27.612  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1378 ms
2020-12-23 17:13:27.778  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:13:27.791  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-40 - Starting...
2020-12-23 17:13:27.812  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-40 - Start completed.
2020-12-23 17:13:27.830  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:13:28.518  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:13:28.523  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:13:28.533  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:13:28.869  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:13:28.870  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:13:28.878  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:13:28.878  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:13:28.879  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:13:28.907  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:13:29.647  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:13:30.194  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.181 seconds (JVM running for 7706.089)
2020-12-23 17:13:30.199  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:13:31.010  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:13:31.015  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:13:31.019  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:13:31.157  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:13:31.367  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:13:59.827  INFO 21196 --- [Thread-315] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:13:59.833  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:14:01.172 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:14:02.837  WARN 21196 --- [Thread-315] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:14:02.843  INFO 21196 --- [Thread-315] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:02.851  INFO 21196 --- [Thread-315] com.zaxxer.hikari.HikariDataSource       : HikariPool-40 - Shutdown initiated...
2020-12-23 17:14:02.860  INFO 21196 --- [Thread-315] com.zaxxer.hikari.HikariDataSource       : HikariPool-40 - Shutdown completed.
2020-12-23 17:14:06.727  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:14:08.983  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:14:08.983  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:14:08.985  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:14:09.604  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:14:09.875  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 248ms. Found 10 JPA repository interfaces.
2020-12-23 17:14:10.054  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:14:10.069  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:14:10.476  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:14:10.488  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:14:10.489  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:14:10.577  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:14:10.578  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1587 ms
2020-12-23 17:14:10.753  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:14:10.770  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-41 - Starting...
2020-12-23 17:14:10.795  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-41 - Start completed.
2020-12-23 17:14:10.796  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:14:11.588  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:14:11.625  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:11.640  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:14:12.696  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:14:12.701  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:14:12.729  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:14:12.731  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:14:12.734  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:14:12.834  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:14:15.031  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:14:17.286  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:14:19.474  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:14:19.475  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:14:19.476  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:14:19.690 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:14:20.037  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:14:20.095  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57ms. Found 10 JPA repository interfaces.
2020-12-23 17:14:20.265  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:14:20.336  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:14:20.651  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:14:20.743  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1261 ms
2020-12-23 17:14:20.848  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:14:20.859  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-42 - Starting...
2020-12-23 17:14:20.874  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-42 - Start completed.
2020-12-23 17:14:20.875  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:14:21.441  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:14:21.460  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:21.470  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:14:21.777  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:14:21.778  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:14:21.784  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:14:21.785  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:14:21.793  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:14:21.817  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:14:22.294  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:14:22.773  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.198 seconds (JVM running for 7758.668)
2020-12-23 17:14:22.800  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:14:23.869  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:14:23.872  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2020-12-23 17:14:24.011  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:14:24.016  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:14:42.372  INFO 21196 --- [Thread-331] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:14:42.379  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:14:43.008  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:14:44.646  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:14:45.392  WARN 21196 --- [Thread-331] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:14:45.395  INFO 21196 --- [Thread-331] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:45.396  INFO 21196 --- [Thread-331] com.zaxxer.hikari.HikariDataSource       : HikariPool-42 - Shutdown initiated...
2020-12-23 17:14:45.442  INFO 21196 --- [Thread-331] com.zaxxer.hikari.HikariDataSource       : HikariPool-42 - Shutdown completed.
2020-12-23 17:14:52.356  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:14:52.963  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:14:52.965  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:52.979  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:14:53.604  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:14:53.606  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:14:53.621  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:14:53.622  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:14:53.624  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:14:53.674  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:14:54.487  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:14:54.672  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:14:54.673  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:14:54.676  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:14:55.524  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:14:55.834  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 15.368 seconds (JVM running for 7791.728)
2020-12-23 17:14:55.835  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 282ms. Found 10 JPA repository interfaces.
2020-12-23 17:14:55.863  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:14:56.120  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:14:56.150  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:14:56.558  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:14:56.565  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:14:56.572  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:14:56.654  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:14:56.655  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:14:56.655  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1974 ms
2020-12-23 17:14:56.655  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:14:56.683  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:14:57.335  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:14:57.349  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:14:57.349  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-44 - Starting...
2020-12-23 17:14:57.357  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:14:57.781  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-44 - Start completed.
2020-12-23 17:14:57.782  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:14:59.849 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:14:59.862  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:14:59.898  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:14:59.909  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:15:00.707  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:15:00.709  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:00.723  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:15:00.833  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:15:03.293  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:15:03.303  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:03.306  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:03.307  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-44 - Shutdown initiated...
2020-12-23 17:15:03.325  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-44 - Shutdown completed.
2020-12-23 17:15:03.326  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:15:03.342  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:15:03.345 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:15:20.522  INFO 21196 --- [Thread-341] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:20.524  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:15:22.841  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:15:23.529  WARN 21196 --- [Thread-341] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:15:23.654  INFO 21196 --- [Thread-341] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:23.679  INFO 21196 --- [Thread-341] com.zaxxer.hikari.HikariDataSource       : HikariPool-43 - Shutdown initiated...
2020-12-23 17:15:23.684  INFO 21196 --- [Thread-341] com.zaxxer.hikari.HikariDataSource       : HikariPool-43 - Shutdown completed.
2020-12-23 17:15:25.627  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:15:25.681  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:15:25.753  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69ms. Found 10 JPA repository interfaces.
2020-12-23 17:15:25.878  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:15:25.902  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:15:26.250  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:15:26.255  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:15:26.260  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:15:26.338  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:15:26.342  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1166 ms
2020-12-23 17:15:26.497  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:15:26.513  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-45 - Starting...
2020-12-23 17:15:26.692  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-45 - Start completed.
2020-12-23 17:15:26.693  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:15:27.442  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:15:27.560  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:27.613  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:15:27.847  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:15:28.231  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:15:28.302  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:15:28.541  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:15:28.543  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:28.556  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:15:28.558  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:15:28.559  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:15:28.621  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:15:29.128  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:15:29.286  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 156ms. Found 10 JPA repository interfaces.
2020-12-23 17:15:29.617  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:15:29.633  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:15:29.836  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:15:29.953  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:15:29.957  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:15:29.962  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:15:30.037  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:15:30.038  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1721 ms
2020-12-23 17:15:30.186  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:15:30.198  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-46 - Starting...
2020-12-23 17:15:30.244  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-46 - Start completed.
2020-12-23 17:15:30.245  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:15:30.587  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 9.977 seconds (JVM running for 7826.481)
2020-12-23 17:15:30.590  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:15:31.197  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:15:31.198  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:31.209  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:15:31.385  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:15:31.385  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:15:31.390  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:15:31.557  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:15:31.668  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:15:32.030  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:15:32.050  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:32.154  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:15:32.252  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:15:33.006  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:15:33.008  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:15:33.011  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:33.012  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-46 - Shutdown initiated...
2020-12-23 17:15:33.017  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-46 - Shutdown completed.
2020-12-23 17:15:33.018  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:15:33.042  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:15:33.044 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:15:42.389 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:15:58.837  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:15:59.913  WARN 21196 --- [Thread-355] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:15:59.917  INFO 21196 --- [Thread-355] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:15:59.919  INFO 21196 --- [Thread-355] com.zaxxer.hikari.HikariDataSource       : HikariPool-45 - Shutdown initiated...
2020-12-23 17:15:59.930  INFO 21196 --- [Thread-355] com.zaxxer.hikari.HikariDataSource       : HikariPool-45 - Shutdown completed.
2020-12-23 17:16:05.128  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:16:05.270  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4195 ms
2020-12-23 17:16:05.419  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:16:05.722  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:16:05.752  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-47 - Starting...
2020-12-23 17:16:05.775  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-47 - Start completed.
2020-12-23 17:16:05.776  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:16:06.979  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:16:06.999  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:16:07.013  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:16:07.783  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:16:07.801  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:16:07.803  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:16:08.069  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:16:08.072  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:16:08.086  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:16:08.089  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:16:08.095  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:16:08.168  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:16:08.572  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:16:08.715  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 135ms. Found 10 JPA repository interfaces.
2020-12-23 17:16:08.965  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:16:09.050  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:16:09.531  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:16:09.563  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:16:09.567  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:16:09.731  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:16:09.745  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1931 ms
2020-12-23 17:16:10.050  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:16:10.107  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-48 - Starting...
2020-12-23 17:16:10.126  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:16:10.135  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-48 - Start completed.
2020-12-23 17:16:10.137  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:16:16.057  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:16:16.117  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:16:16.133  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:16:16.494  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 20.489 seconds (JVM running for 7872.389)
2020-12-23 17:16:16.505  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:16:18.040  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:16:18.085  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:16:18.136  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:16:18.208  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:16:20.060 ERROR 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook not setted with code: INVALID_URL, with message: Result[HttpRequest[POST / HTTP/1.1]@22d78398 > HttpResponse[HTTP/1.1 503 Service Unavailable]@5e937c7d] null
2020-12-23 17:16:20.532 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:16:21.855  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:16:22.300  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:16:24.749  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 24.199 seconds (JVM running for 7880.644)
2020-12-23 17:16:24.765  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:16:29.952  INFO 21196 --- [Thread-371] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:16:29.953  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:16:30.446  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:16:30.453  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:16:30.669  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:16:30.696  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:16:32.978  WARN 21196 --- [Thread-371] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:16:32.993  INFO 21196 --- [Thread-371] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:16:33.010  INFO 21196 --- [Thread-371] com.zaxxer.hikari.HikariDataSource       : HikariPool-47 - Shutdown initiated...
2020-12-23 17:16:33.040  INFO 21196 --- [Thread-371] com.zaxxer.hikari.HikariDataSource       : HikariPool-47 - Shutdown completed.
2020-12-23 17:16:34.207  INFO 21196 --- [Thread-371] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:16:34.208  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:16:37.209  WARN 21196 --- [Thread-371] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:16:37.215  INFO 21196 --- [Thread-371] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:16:37.220  INFO 21196 --- [Thread-371] com.zaxxer.hikari.HikariDataSource       : HikariPool-48 - Shutdown initiated...
2020-12-23 17:16:37.230  INFO 21196 --- [Thread-371] com.zaxxer.hikari.HikariDataSource       : HikariPool-48 - Shutdown completed.
2020-12-23 17:16:40.184  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:16:42.382  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:16:42.383  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:16:42.385  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:16:43.061  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:16:43.175  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 111ms. Found 10 JPA repository interfaces.
2020-12-23 17:16:43.338  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:16:43.412  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:16:43.967  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:16:43.990  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:16:43.992  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:16:44.114  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:16:44.305  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1913 ms
2020-12-23 17:16:44.535  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:16:44.617  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-49 - Starting...
2020-12-23 17:16:44.730  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-49 - Start completed.
2020-12-23 17:16:44.750  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:16:46.716  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:16:46.839  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:16:46.858  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:16:47.589  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:16:47.590  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:16:47.598  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:16:47.599  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:16:47.600  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:16:47.637  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:16:48.489  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:16:49.153  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.394 seconds (JVM running for 7905.048)
2020-12-23 17:16:49.157  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:16:49.942  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:16:49.944  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:16:49.949  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:16:50.089  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:16:50.098  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:16:56.911 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:17:13.575  INFO 21196 --- [Thread-382] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:13.585  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:17:16.585  WARN 21196 --- [Thread-382] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:17:16.588  INFO 21196 --- [Thread-382] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:16.592  INFO 21196 --- [Thread-382] com.zaxxer.hikari.HikariDataSource       : HikariPool-49 - Shutdown initiated...
2020-12-23 17:17:16.607  INFO 21196 --- [Thread-382] com.zaxxer.hikari.HikariDataSource       : HikariPool-49 - Shutdown completed.
2020-12-23 17:17:19.199  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:17:21.688  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:17:21.689  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:17:21.690  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:17:22.255  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:17:22.437  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 171ms. Found 10 JPA repository interfaces.
2020-12-23 17:17:22.730  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:17:22.753  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:17:23.384  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:17:23.403  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:17:23.417  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:17:23.547  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:17:23.551  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1855 ms
2020-12-23 17:17:23.834  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:17:23.877  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-50 - Starting...
2020-12-23 17:17:24.010  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-50 - Start completed.
2020-12-23 17:17:25.143  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:17:27.836  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:17:27.837  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:27.850  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:17:28.538  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:17:28.539  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:28.549  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:17:28.550  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:17:28.551  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:17:28.601  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:17:29.958 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:17:31.203  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'configClientProperties' defined in class path resource [org/springframework/cloud/config/client/ConfigClientAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.config.client.ConfigClientProperties]: Factory method 'configClientProperties' threw exception; nested exception is java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@1c6a4266 has been closed already
2020-12-23 17:17:31.599  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:31.622  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:31.646  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-50 - Shutdown initiated...
2020-12-23 17:17:33.970  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:17:34.212 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:17:39.936  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:17:40.089  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:17:40.205  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:40.220  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:17:40.893  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:17:40.895  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:40.904  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:17:40.915  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:17:40.927  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:17:41.023  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:17:41.832  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:17:41.978  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:17:41.979  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:17:41.981  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:17:42.446  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 10.723 seconds (JVM running for 7958.341)
2020-12-23 17:17:42.450  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:17:42.504  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:17:42.608  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 88ms. Found 10 JPA repository interfaces.
2020-12-23 17:17:42.805  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:17:42.818  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:17:43.030  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:17:43.035  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:17:43.037  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:17:43.093  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-4].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:17:43.094  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1106 ms
2020-12-23 17:17:43.195  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:17:43.204  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-52 - Starting...
2020-12-23 17:17:43.220  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-52 - Start completed.
2020-12-23 17:17:43.221  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:17:43.316  INFO 21196 --- [http-nio-5000-exec-2] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:17:43.316  INFO 21196 --- [http-nio-5000-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:17:43.321  INFO 21196 --- [http-nio-5000-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:17:43.466  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:17:43.490  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:17:44.145  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:17:44.155  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:44.169  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:17:45.588  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:17:45.860  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:45.939  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:17:46.037  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:17:47.847  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:17:47.875  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:47.877  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:47.878  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-52 - Shutdown initiated...
2020-12-23 17:17:47.895  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-52 - Shutdown completed.
2020-12-23 17:17:47.896  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:17:47.907  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:17:47.998 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:17:53.296  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:17:55.478  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:17:55.478  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:17:55.480  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:17:55.562  WARN 21196 --- [Thread-400] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:17:55.740  INFO 21196 --- [Thread-400] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:55.797  INFO 21196 --- [Thread-400] com.zaxxer.hikari.HikariDataSource       : HikariPool-51 - Shutdown initiated...
2020-12-23 17:17:55.903  INFO 21196 --- [Thread-400] com.zaxxer.hikari.HikariDataSource       : HikariPool-51 - Shutdown completed.
2020-12-23 17:17:57.870  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:17:57.981  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:17:57.982  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:17:58.008  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:17:58.471  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:17:58.472  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:17:58.480  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:17:58.481  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:17:58.481  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:17:58.517  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:17:59.411  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:17:59.886  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:17:59.896  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:17:59.899  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:00.027  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 8.403 seconds (JVM running for 7975.921)
2020-12-23 17:18:00.042  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:18:00.472  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:18:00.538  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 65ms. Found 10 JPA repository interfaces.
2020-12-23 17:18:00.644  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:18:00.654  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:18:01.019  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-4].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:18:01.020  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:18:01.024  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:18:01.145  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:18:01.157  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:18:01.199  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:18:01.200  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:18:01.283  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:18:01.335  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:18:01.336  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1399 ms
2020-12-23 17:18:01.471  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:18:01.483  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-54 - Starting...
2020-12-23 17:18:01.541  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-54 - Start completed.
2020-12-23 17:18:01.552  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:18:02.360  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:18:02.361  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:02.377  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:18:02.954  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:18:02.955  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:18:02.963  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:18:03.004  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:18:04.121  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:18:04.123  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:18:04.126  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:04.127  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-54 - Shutdown initiated...
2020-12-23 17:18:04.133  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-54 - Shutdown completed.
2020-12-23 17:18:04.134  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:18:04.143  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:18:04.145 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:18:13.602 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:18:28.596  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:18:30.608  WARN 21196 --- [Thread-416] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:18:30.611  INFO 21196 --- [Thread-416] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:30.612  INFO 21196 --- [Thread-416] com.zaxxer.hikari.HikariDataSource       : HikariPool-53 - Shutdown initiated...
2020-12-23 17:18:30.631  INFO 21196 --- [Thread-416] com.zaxxer.hikari.HikariDataSource       : HikariPool-53 - Shutdown completed.
2020-12-23 17:18:31.157  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:18:31.256  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:18:31.274  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:37.232  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:37.262  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:18:37.463  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:18:37.885  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:18:37.899  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:18:37.931  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:18:37.946  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:18:37.946  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:18:38.008  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:18:39.733  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:18:39.739  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:18:39.741  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:42.982  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:18:43.046  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:18:43.993  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:18:46.024  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:18:46.025  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:18:46.027  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:48.860  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:18:48.995  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:18:48.996  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:49.011  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:18:49.022  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:18:49.024  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:18:49.042  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:18:49.453  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:18:49.454  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:18:49.462  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:18:49.463  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:18:49.464  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:18:49.493  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:18:50.837  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:18:50.937  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:18:50.940  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:18:50.942  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:51.336  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:18:51.337  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:18:51.338  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:18:52.566 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:18:52.872  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 12.116 seconds (JVM running for 8028.767)
2020-12-23 17:18:52.925  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:18:53.780  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:18:53.922  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:18:53.923  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:18:53.953  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2020-12-23 17:18:54.109  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:18:54.154  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:18:54.211  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:18:54.336  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 506ms. Found 10 JPA repository interfaces.
2020-12-23 17:18:54.689  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 529ms. Found 10 JPA repository interfaces.
2020-12-23 17:18:54.783  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:18:54.834  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:18:55.008  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:18:55.062  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:18:55.218  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:18:55.264  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:18:55.277  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:18:55.421  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:18:55.421  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4474 ms
2020-12-23 17:18:55.484  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:18:55.503  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:18:55.569  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:18:55.676  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:18:55.704  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-8].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:18:55.735  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4391 ms
2020-12-23 17:18:55.780  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-57 - Starting...
2020-12-23 17:18:55.892  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-57 - Start completed.
2020-12-23 17:18:55.924  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:18:56.020  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:18:56.586  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-58 - Starting...
2020-12-23 17:18:56.692  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-58 - Start completed.
2020-12-23 17:18:56.693  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:18:58.566  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:18:58.580  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:58.596  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:18:59.376  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:18:59.416  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:18:59.558  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:18:59.684  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:18:59.710  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:18:59.726  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:18:59.765  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:00.546  INFO 21196 --- [Thread-440] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:00.546  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:19:00.548  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:19:00.549  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:00.559  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:19:00.562  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:19:00.573  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:19:00.666  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:01.761  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:19:03.486  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:19:03.489  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:03.491  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:03.492  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-58 - Shutdown initiated...
2020-12-23 17:19:03.502  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-58 - Shutdown completed.
2020-12-23 17:19:03.518  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:19:03.522 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:19:03.550  WARN 21196 --- [Thread-440] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:19:03.557  INFO 21196 --- [Thread-440] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:03.563  INFO 21196 --- [Thread-440] com.zaxxer.hikari.HikariDataSource       : HikariPool-56 - Shutdown initiated...
2020-12-23 17:19:03.578  INFO 21196 --- [Thread-440] com.zaxxer.hikari.HikariDataSource       : HikariPool-56 - Shutdown completed.
2020-12-23 17:19:06.377  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:19:08.546  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:19:08.547  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:19:08.549  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:19:09.235  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:19:09.292  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56ms. Found 10 JPA repository interfaces.
2020-12-23 17:19:09.462  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:19:09.481  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:19:09.746  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:19:09.747  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:19:09.748  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:19:09.791  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:19:09.792  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1237 ms
2020-12-23 17:19:09.981  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:19:10.027  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-59 - Starting...
2020-12-23 17:19:10.051  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-59 - Start completed.
2020-12-23 17:19:10.066  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:19:10.803  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:19:10.852  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:10.868  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:19:11.918  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:19:11.919  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:11.930  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:19:11.933  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:19:11.934  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:19:11.997  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:13.838  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:19:15.908  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.754 seconds (JVM running for 8051.803)
2020-12-23 17:19:15.917  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:19:16.673  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:19:16.675  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:19:16.680  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:19:16.819  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:19:16.828  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:19:27.612 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:19:35.151  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:19:35.409  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:19:35.417  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:19:35.511  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:19:36.007  WARN 21196 --- [Thread-460] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:19:36.036  INFO 21196 --- [Thread-460] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:36.049  INFO 21196 --- [Thread-460] com.zaxxer.hikari.HikariDataSource       : HikariPool-59 - Shutdown initiated...
2020-12-23 17:19:36.071  INFO 21196 --- [Thread-460] com.zaxxer.hikari.HikariDataSource       : HikariPool-59 - Shutdown completed.
2020-12-23 17:19:39.585  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:19:39.588  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:19:39.589  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:19:39.599  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:19:39.610  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:19:39.611  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:19:39.613  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:19:39.690  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:19:39.698  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2296 ms
2020-12-23 17:19:39.707  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-8].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:19:39.713  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2075 ms
2020-12-23 17:19:40.913  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:19:40.916  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:19:40.929  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-60 - Starting...
2020-12-23 17:19:40.983  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-61 - Starting...
2020-12-23 17:19:41.005  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-60 - Start completed.
2020-12-23 17:19:41.045  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-61 - Start completed.
2020-12-23 17:19:41.048  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:19:41.048  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:19:41.736  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:19:41.809  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:19:41.813  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:19:43.148  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:19:43.547  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 374ms. Found 10 JPA repository interfaces.
2020-12-23 17:19:43.824  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:19:43.867  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:19:44.276  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:19:44.279  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:19:44.279  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:19:44.384  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:19:44.385  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:44.398  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:19:44.458  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-9].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:19:44.500  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2682 ms
2020-12-23 17:19:44.832  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:19:44.842  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:44.854  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:19:44.932  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:19:44.945  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-62 - Starting...
2020-12-23 17:19:45.013  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-62 - Start completed.
2020-12-23 17:19:45.014  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:19:47.036  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:19:47.085  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:19:47.085  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:47.125  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:47.351  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:19:47.383  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:19:47.385  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:19:47.387  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:19:47.464  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:47.468  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:47.683  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:19:47.699  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:47.713  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:19:48.583  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:19:48.612  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:48.642  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:19:48.720  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:19:50.294  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:19:50.301  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:19:50.443  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:50.456  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:50.457  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-60 - Shutdown initiated...
2020-12-23 17:19:50.505  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-60 - Shutdown completed.
2020-12-23 17:19:50.579  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:19:50.663  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:19:50.733 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:19:51.614  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:19:51.625  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:19:51.636  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:19:51.649  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-62 - Shutdown initiated...
2020-12-23 17:19:51.702  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-62 - Shutdown completed.
2020-12-23 17:19:51.717  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:19:51.719 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:19:52.817  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 20.133 seconds (JVM running for 8088.711)
2020-12-23 17:19:52.825  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:19:53.615  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:19:53.618  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:19:53.747  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:19:53.752  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:20:00.553 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:20:07.831  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:20:09.398  WARN 21196 --- [Thread-475] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:20:09.422  INFO 21196 --- [Thread-475] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:09.425  INFO 21196 --- [Thread-475] com.zaxxer.hikari.HikariDataSource       : HikariPool-61 - Shutdown initiated...
2020-12-23 17:20:09.431  INFO 21196 --- [Thread-475] com.zaxxer.hikari.HikariDataSource       : HikariPool-61 - Shutdown completed.
2020-12-23 17:20:10.057  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:20:16.584  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:20:16.809  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:20:16.811  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:16.836  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:20:17.991  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:20:18.000  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:18.018  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:20:18.026  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:20:18.034  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:20:18.098  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:20:18.957  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:20:18.962  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:20:18.964  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:20:19.528  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:20:19.708  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:20:20.281  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 565ms. Found 10 JPA repository interfaces.
2020-12-23 17:20:20.609  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:20:20.664  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:20:21.144  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:20:21.284  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:20:21.314  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:20:21.456  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:20:21.484  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2515 ms
2020-12-23 17:20:21.707  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:20:21.772  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 16.145 seconds (JVM running for 8117.667)
2020-12-23 17:20:21.777  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-64 - Starting...
2020-12-23 17:20:21.805  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:20:21.911  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-64 - Start completed.
2020-12-23 17:20:21.937  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:20:26.512  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-9].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:20:26.538  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:20:26.606  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 15 ms
2020-12-23 17:20:26.895  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:20:26.968  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:20:26.970  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:20:27.020  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:27.035  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:20:28.004  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:20:28.010  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:28.028  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:20:28.184  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:20:30.701  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:20:30.724  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:30.765  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:30.828  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-64 - Shutdown initiated...
2020-12-23 17:20:33.006 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:20:34.620  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-64 - Shutdown completed.
2020-12-23 17:20:34.623  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:20:34.636  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:20:34.639 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:20:39.603  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:20:40.022  WARN 21196 --- [Thread-497] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:20:40.037  INFO 21196 --- [Thread-497] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:40.040  INFO 21196 --- [Thread-497] com.zaxxer.hikari.HikariDataSource       : HikariPool-63 - Shutdown initiated...
2020-12-23 17:20:40.053  INFO 21196 --- [Thread-497] com.zaxxer.hikari.HikariDataSource       : HikariPool-63 - Shutdown completed.
2020-12-23 17:20:41.216  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:20:41.951  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:20:41.954  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:20:41.956  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:20:42.022  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:20:42.873  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:20:42.890  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:20:42.897  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:20:43.281  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:20:43.283  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:20:43.283  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:20:43.337  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:20:43.337  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1374 ms
2020-12-23 17:20:43.521  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:20:43.532  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-65 - Starting...
2020-12-23 17:20:43.554  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-65 - Start completed.
2020-12-23 17:20:43.555  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:20:43.561  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:20:43.561  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:20:43.563  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:20:44.290  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:20:44.291  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:44.304  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:20:44.430  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:20:44.716  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 254ms. Found 10 JPA repository interfaces.
2020-12-23 17:20:44.943  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:20:45.026  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:20:45.184  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:20:45.227  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:45.249  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:20:45.297  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:20:45.328  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:20:45.329  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:20:45.339  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:20:45.340  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:20:45.403  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:20:45.424  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:20:45.430  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:20:45.440  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:20:45.507  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-11].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:20:45.507  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1939 ms
2020-12-23 17:20:45.650  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:20:45.668  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-66 - Starting...
2020-12-23 17:20:45.794  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-66 - Start completed.
2020-12-23 17:20:45.795  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:20:47.058  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:20:47.068  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:47.088  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:20:47.235  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:20:48.578  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:20:48.847  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 263ms. Found 10 JPA repository interfaces.
2020-12-23 17:20:48.915  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 13.302 seconds (JVM running for 8144.809)
2020-12-23 17:20:48.941  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:20:49.200  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:20:49.554  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:20:49.894  INFO 21196 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:20:49.895  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:20:49.899  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2020-12-23 17:20:50.099  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:20:50.149  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:20:50.476  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:20:50.479  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:20:50.483  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:20:50.580  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-12].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:20:50.590  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5232 ms
2020-12-23 17:20:50.816  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:20:50.835  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-67 - Starting...
2020-12-23 17:20:50.864  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-67 - Start completed.
2020-12-23 17:20:50.865  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:20:52.252  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:20:52.258  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:52.268  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:20:52.309  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:20:52.830  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:20:52.834  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:52.850  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:20:53.234  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:20:53.380  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:53.464  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:53.465  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-66 - Shutdown initiated...
2020-12-23 17:20:53.506  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-66 - Shutdown completed.
2020-12-23 17:20:53.506  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:20:53.544  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:20:53.546 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:20:53.605  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:20:53.606  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:53.614  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:20:53.615  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:20:53.615  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:20:53.654  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:20:54.423  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:20:54.431  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:20:54.448  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:20:54.449  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-67 - Shutdown initiated...
2020-12-23 17:20:54.460  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-67 - Shutdown completed.
2020-12-23 17:20:54.473  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:20:54.475 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:21:06.388 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:21:11.355  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:11.393  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:21:11.396  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:21:11.412  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:12.822  WARN 21196 --- [Thread-516] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:21:12.824  INFO 21196 --- [Thread-516] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:12.825  INFO 21196 --- [Thread-516] com.zaxxer.hikari.HikariDataSource       : HikariPool-65 - Shutdown initiated...
2020-12-23 17:21:12.831  INFO 21196 --- [Thread-516] com.zaxxer.hikari.HikariDataSource       : HikariPool-65 - Shutdown completed.
2020-12-23 17:21:17.786  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-69 - Start completed.
2020-12-23 17:21:17.813  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:21:17.827  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:18.746  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:21:18.748  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:18.762  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:21:19.001  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:21:19.002  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:19.020  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:21:19.527  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:21:19.528  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:21:19.538  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:21:19.539  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:21:19.539  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:21:19.585  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:21:19.668  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:21:19.673  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:21:19.684  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:21:20.046  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:21:20.307  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:21:20.308  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:21:20.310  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:21:21.256  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:21:21.381  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:21:21.484  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 148ms. Found 10 JPA repository interfaces.
2020-12-23 17:21:21.925  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:21:21.972  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:21:23.584  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:21:27.805  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:21:27.923  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:21:27.964  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:27.998  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:28.017  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:21:28.021 ERROR 21196 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'scopedTarget.viberService': Unsatisfied dependency expressed through field 'viberProxy'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'by.testbot.proxy.ViberProxy': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@1861aa3d has been closed already
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:130) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1420) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$1(AbstractBeanFactory.java:363) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$BeanLifecycleWrapper.getBean(GenericScope.java:389) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope.get(GenericScope.java:186) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1109) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.cloud.context.scope.refresh.RefreshScope.eagerlyInitialize(RefreshScope.java:127) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.context.scope.refresh.RefreshScope.start(RefreshScope.java:118) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.context.scope.refresh.RefreshScope.onApplicationEvent(RefreshScope.java:112) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.context.scope.refresh.RefreshScope.onApplicationEvent(RefreshScope.java:66) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.3.5.RELEASE.jar:2.3.5.RELEASE]
	at by.testbot.TestbotApplication.main(TestbotApplication.java:21) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.4.1.jar:2.4.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'by.testbot.proxy.ViberProxy': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@1861aa3d has been closed already
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:176) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1828) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1265) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1532) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1489) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1270) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1227) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 35 common frames omitted
Caused by: java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@1861aa3d has been closed already
	at org.springframework.context.support.AbstractApplicationContext.assertBeanFactoryActive(AbstractApplicationContext.java:1093) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBeanNamesForType(AbstractApplicationContext.java:1230) ~[spring-context-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:228) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:232) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.beans.factory.BeanFactoryUtils.beanNamesForTypeIncludingAncestors(BeanFactoryUtils.java:232) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.cloud.context.named.NamedContextFactory.getInstance(NamedContextFactory.java:146) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.get(FeignClientFactoryBean.java:264) ~[spring-cloud-openfeign-core-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.feign(FeignClientFactoryBean.java:97) ~[spring-cloud-openfeign-core-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:320) ~[spring-cloud-openfeign-core-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:310) ~[spring-cloud-openfeign-core-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:169) ~[spring-beans-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 46 common frames omitted

2020-12-23 17:21:30.164  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:21:30.172  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:21:30.174  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:21:30.352  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:21:30.352  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:21:30.355  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:21:32.698  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:21:32.739  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:21:33.321  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 586ms. Found 10 JPA repository interfaces.
2020-12-23 17:21:33.566  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 806ms. Found 10 JPA repository interfaces.
2020-12-23 17:21:33.741  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:21:33.794  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:21:33.866  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:21:33.951  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:21:34.165  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:21:34.338  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3977 ms
2020-12-23 17:21:34.383  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:21:34.493  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4313 ms
2020-12-23 17:21:34.550  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:21:34.627  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-71 - Starting...
2020-12-23 17:21:34.668  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-71 - Start completed.
2020-12-23 17:21:34.669  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:21:34.719  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:21:34.770  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-72 - Starting...
2020-12-23 17:21:34.799  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-72 - Start completed.
2020-12-23 17:21:34.800  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:21:37.002 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:21:40.715  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:21:40.720  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:40.735  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:21:40.881  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:21:40.882  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:40.897  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:21:41.680  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:21:41.683  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:21:41.700  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:21:41.723  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:21:41.747  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:21:41.805  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:21:41.807  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:21:41.834  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:21:41.859  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:21:41.917  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:21:43.925  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:21:44.060  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:21:44.068  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:21:44.070  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:44.071  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-72 - Shutdown initiated...
2020-12-23 17:21:44.081  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-72 - Shutdown completed.
2020-12-23 17:21:44.100  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:21:44.102 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:21:45.410  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 21.734 seconds (JVM running for 8201.306)
2020-12-23 17:21:45.457  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:21:46.301  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:21:46.307  INFO 21196 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:21:46.444  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:21:46.455  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:21:56.183  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:21:56.196  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:21:56.208  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:56.274  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:56.324  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:21:56.409  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:21:56.441  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:21:56.443  INFO 21196 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-23 17:21:56.488  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:56.488  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:21:57.017  WARN 21196 --- [Thread-556] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:21:57.018  INFO 21196 --- [Thread-556] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:21:57.020  INFO 21196 --- [Thread-556] com.zaxxer.hikari.HikariDataSource       : HikariPool-71 - Shutdown initiated...
2020-12-23 17:21:57.025  INFO 21196 --- [Thread-556] com.zaxxer.hikari.HikariDataSource       : HikariPool-71 - Shutdown completed.
2020-12-23 17:22:00.288  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 300ms. Found 10 JPA repository interfaces.
2020-12-23 17:22:00.375  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 454ms. Found 10 JPA repository interfaces.
2020-12-23 17:22:00.552  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:22:00.653  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:22:00.891  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:22:00.968  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:22:01.002  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:22:01.012  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:22:01.021  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 306ms. Found 10 JPA repository interfaces.
2020-12-23 17:22:01.434  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:22:01.531  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:22:01.540  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:22:01.549  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:22:01.574  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:22:01.574  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:22:01.574  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:22:01.690  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:22:01.734  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:22:01.749  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-16].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:22:01.841  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3228 ms
2020-12-23 17:22:02.004  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-15].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:22:02.090  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3627 ms
2020-12-23 17:22:02.243  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:22:02.270  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:22:02.343  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:22:02.394  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:22:02.406  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-73 - Starting...
2020-12-23 17:22:02.467  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-73 - Start completed.
2020-12-23 17:22:02.468  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:22:02.495  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-17].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:22:02.496  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3727 ms
2020-12-23 17:22:02.496  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:22:02.549  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-74 - Starting...
2020-12-23 17:22:02.659  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-74 - Start completed.
2020-12-23 17:22:02.843  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:22:02.794  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:22:03.970  INFO 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:22:04.221  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-75 - Starting...
2020-12-23 17:22:04.302  WARN 21196 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:22:04.320  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2522ms. Found 10 JPA repository interfaces.
2020-12-23 17:22:04.326  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:22:04.462  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-75 - Start completed.
2020-12-23 17:22:04.463  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:22:04.922  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:22:04.988  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:22:05.031  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:22:05.043  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:05.054  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:22:05.468  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:22:05.532  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:22:05.571  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:22:05.800  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-18].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:22:05.916  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7293 ms
2020-12-23 17:22:07.890  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:22:08.037  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:22:08.381  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-76 - Starting...
2020-12-23 17:22:08.510  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:08.847  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:22:09.198  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:22:09.247  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-76 - Start completed.
2020-12-23 17:22:09.378  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:11.969 ERROR 21196 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1bed9219.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:22:11.972  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:22:12.017  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:22:12.023  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:22:12.043  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:22:12.068  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:22:12.069  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:12.142  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:22:12.181  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:22:13.147  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:22:13.521  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:22:13.543  INFO 21196 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 274ms. Found 10 JPA repository interfaces.
2020-12-23 17:22:13.586  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:22:13.685  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:13.768  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:13.797  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:22:13.929  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:22:13.986  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:14.003  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:22:14.082  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:22:14.103  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:22:14.144  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:22:14.295  INFO 21196 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:22:14.372  INFO 21196 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:22:14.915  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:22:15.180  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:22:15.181  INFO 21196 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:22:15.259  INFO 21196 --- [restartedMain] o.a.c.c.C.[Tomcat-19].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2020-12-23 17:22:15.280  INFO 21196 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 10930 ms
2020-12-23 17:22:15.567  INFO 21196 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:22:15.613  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-77 - Starting...
2020-12-23 17:22:15.721  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-77 - Start completed.
2020-12-23 17:22:15.722  INFO 21196 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:22:16.726  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:22:16.728  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:16.738  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:22:16.778  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:22:17.420  INFO 21196 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:22:17.436  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:22:17.605  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:22:17.639  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:18.184  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:18.186  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-74 - Shutdown initiated...
2020-12-23 17:22:18.755  INFO 21196 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:22:18.756  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:18.769  INFO 21196 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:22:19.715  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-74 - Shutdown completed.
2020-12-23 17:22:19.721  INFO 21196 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:22:19.811  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:19.813  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:19.814  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-75 - Shutdown initiated...
2020-12-23 17:22:19.821  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:22:19.849  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:19.857  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:19.875  INFO 21196 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 27.775 seconds (JVM running for 8235.769)
2020-12-23 17:22:19.876  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-76 - Shutdown initiated...
2020-12-23 17:22:19.878  INFO 21196 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:22:20.243  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:22:20.246  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:20.259  WARN 21196 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:22:20.302  WARN 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:22:20.315  INFO 21196 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:22:20.412  WARN 21196 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:22:23.273  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-76 - Shutdown completed.
2020-12-23 17:22:23.273  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-75 - Shutdown completed.
2020-12-23 17:22:23.317  INFO 21196 --- [http-nio-5000-exec-10] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:22:23.487  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:22:23.494  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:22:23.477  INFO 21196 --- [http-nio-5000-exec-10] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:22:23.521 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:22:23.524 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:22:23.601  WARN 21196 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:22:23.662  INFO 21196 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:23.668  INFO 21196 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:22:23.669  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-77 - Shutdown initiated...
2020-12-23 17:22:23.698  INFO 21196 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-77 - Shutdown completed.
2020-12-23 17:22:23.703  INFO 21196 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:22:23.716  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:22:23.806 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:22:23.809  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:22:24.701  INFO 21196 --- [Thread-578] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:22:24.702  INFO 21196 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:22:24.729  INFO 21196 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:22:24.735 ERROR 21196 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:23:13.566  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:23:15.880  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:23:15.882  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:23:15.893  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:23:16.770  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:23:16.986  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 206ms. Found 10 JPA repository interfaces.
2020-12-23 17:23:17.657  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:23:17.709  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:23:22.890  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:23:22.977  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:23:22.978  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:23:23.262  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:23:23.263  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7333 ms
2020-12-23 17:23:23.786  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:23:23.895  INFO 16700 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 17:23:24.208  INFO 16700 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 17:23:24.329  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 17:23:25.164  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 17:23:25.211  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:23:26.911  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:23:26.932  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:23:26.988  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:23:28.648  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:23:28.650  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:23:28.665  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:23:28.678  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:23:28.678  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:23:28.685  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:23:28.694  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:23:28.840  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:23:29.814  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:23:30.292  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 21.322 seconds (JVM running for 22.789)
2020-12-23 17:23:31.552  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:23:31.554  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:23:31.564  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2020-12-23 17:23:31.794  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:23:31.802  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:23:32.991  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:  
2020-12-23 17:23:33.173  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:41.926  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 23.12.2020 12:30
2020-12-23 17:23:42.452  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:48.964  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:23:49.103  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:49.230  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:51.541  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.postponeMessage
2020-12-23 17:23:51.680  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:55.370  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:23:55.746  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:23:57.811  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:  
2020-12-23 17:23:57.946  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:07.278  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 23.12.2020 10:30
2020-12-23 17:24:07.492  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:13.196  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reject
2020-12-23 17:24:13.743  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:13.880  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:19.402  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 17:24:19.571  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:21.431  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.add
2020-12-23 17:24:21.595  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:29.036  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 17:24:29.345  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:29.490  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:36.987  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:24:37.126  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:39.368  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.delete
2020-12-23 17:24:39.535  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:39.685  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:43.389  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:24:43.526  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:43.650  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:51.019  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 17:24:51.187  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:51.318  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:51.471  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:54.230  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:24:54.365  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:56.381  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 17:24:56.513  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:24:57.744  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 17:24:57.876  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:01.089  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 17:25:01.230  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:02.566  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 17:25:02.747  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:04.009  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 17:25:04.140  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:05.736  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 17:25:05.873  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:07.540  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:25:07.672  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:09.254  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.list
2020-12-23 17:25:09.503  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:09.628  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:12.436  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.edit
2020-12-23 17:25:12.570  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:12.695  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:15.481  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:25:15.619  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:18.639  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.showMessageButton
2020-12-23 17:25:18.767  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:18.901  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:21.062  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.editTextButton
2020-12-23 17:25:21.195  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:21.319  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:24.542  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:25:24.672  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:26.641  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:25:27.192  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:27.329  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:33.424  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.listButton
2020-12-23 17:25:33.601  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:33.765  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:36.549  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.addButton
2020-12-23 17:25:36.689  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:39.731  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:25:41.155  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:44.126  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.selectAnswerType.positive
2020-12-23 17:25:44.550  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:45.690  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:25:46.087  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:47.897  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:25:48.381  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:48.503  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:50.013  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.deleteButton
2020-12-23 17:25:50.152  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:50.292  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:52.932  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:25:53.079  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:56.177  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:25:56.811  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:25:56.959  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:36.647  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:26:36.777  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:39.396  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.add
2020-12-23 17:26:39.536  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:43.777  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:26:44.052  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:45.276  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:26:46.029  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:46.157  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:48.081  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.delete
2020-12-23 17:26:48.220  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:48.344  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:52.310  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 2
2020-12-23 17:26:52.484  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:54.138  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:26:55.144  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:55.268  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:26:57.625  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.editOrder
2020-12-23 17:26:57.755  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:00.880  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:27:01.167  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:01.337  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:02.291  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:27:02.450  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:04.440  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:27:04.609  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:07.581  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 17:27:07.709  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:09.423  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 17:27:09.565  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:10.937  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:27:11.079  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:13.326  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.editOrder
2020-12-23 17:27:13.476  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:13.507  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:27:14.108 ERROR 16700 --- [http-nio-5000-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NumberFormatException: For input string: "callback.botMessageButtonsMenu.back"] with root cause

java.lang.NumberFormatException: For input string: "callback.botMessageButtonsMenu.back"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:na]
	at java.base/java.lang.Integer.parseInt(Integer.java:652) ~[na:na]
	at java.base/java.lang.Integer.parseInt(Integer.java:770) ~[na:na]
	at by.testbot.services.BotMessageService.parseBotMessageSequence(BotMessageService.java:117) ~[classes/:na]
	at by.testbot.services.BotMessageService$$FastClassBySpringCGLIB$$d4b13b35.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.BotMessageService$$EnhancerBySpringCGLIB$$f9f922ab.parseBotMessageSequence(<generated>) ~[classes/:na]
	at by.testbot.bot.BotState$18.handleInput(BotState.java:769) ~[classes/:na]
	at by.testbot.services.viber.ViberService.handleTextMessage(ViberService.java:805) ~[classes/:na]
	at by.testbot.services.viber.ViberService.handleMessageCallback(ViberService.java:425) ~[classes/:na]
	at by.testbot.services.viber.ViberService.handleUpdate(ViberService.java:411) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor142.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:499) ~[spring-cloud-context-2.2.5.RELEASE.jar:2.2.5.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.viber.ViberService$$EnhancerBySpringCGLIB$$6b5cf3f7.handleUpdate(<generated>) ~[classes/:na]
	at by.testbot.services.viber.WebhookService.onWebhookUpdateReceived(WebhookService.java:69) ~[classes/:na]
	at by.testbot.controllers.WebhookController.onUpdateReceived(WebhookController.java:19) ~[classes/:na]
	at jdk.internal.reflect.GeneratedMethodAccessor141.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:652) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.39.jar:9.0.39]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

2020-12-23 17:27:15.179  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:27:15.338  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:17.272  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:27:17.403  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:20.277  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 17:27:20.407  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:27:22.063  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:27:22.238  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:29:31.691  INFO 16700 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:29:31.692  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:29:34.693  WARN 16700 --- [Thread-6] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:29:34.703  INFO 16700 --- [Thread-6] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:29:34.713  INFO 16700 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-12-23 17:29:34.746  INFO 16700 --- [Thread-6] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2020-12-23 17:29:36.351  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:29:38.368  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:29:38.368  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:29:38.370  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:29:38.715  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:29:38.784  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 68ms. Found 10 JPA repository interfaces.
2020-12-23 17:29:38.909  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:29:38.919  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:29:39.058  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:29:39.059  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:29:39.060  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:29:39.101  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:29:39.101  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 727 ms
2020-12-23 17:29:39.186  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:29:39.194  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2020-12-23 17:29:39.212  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2020-12-23 17:29:39.213  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:29:39.669  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:29:39.670  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:29:39.678  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:29:40.014  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:29:40.015  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:29:40.022  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:29:40.023  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:29:40.023  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:29:40.046  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:29:40.511  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:29:40.992  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.126 seconds (JVM running for 393.489)
2020-12-23 17:29:40.995  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:29:41.724  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:29:41.726  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:29:41.731  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:29:41.867  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:29:41.872  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:30:31.698 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:39:51.416  INFO 16700 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:39:51.417  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:39:54.418  WARN 16700 --- [Thread-11] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:39:54.422  INFO 16700 --- [Thread-11] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:39:54.424  INFO 16700 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2020-12-23 17:39:54.441  INFO 16700 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2020-12-23 17:39:55.360  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:39:57.378  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:39:57.379  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:39:57.381  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:39:57.817  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:39:57.981  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 160ms. Found 10 JPA repository interfaces.
2020-12-23 17:39:58.336  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:39:58.383  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:39:58.765  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:39:58.767  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:39:58.770  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:39:58.870  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:39:58.871  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1483 ms
2020-12-23 17:39:59.060  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:39:59.082  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2020-12-23 17:39:59.115  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2020-12-23 17:39:59.116  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:39:59.801  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:39:59.801  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:39:59.811  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:40:00.644  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:40:00.645  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:40:00.656  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:40:00.658  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:40:00.659  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:40:00.795  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:40:01.713  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:40:02.230  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.668 seconds (JVM running for 1014.728)
2020-12-23 17:40:02.237  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:40:03.007  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:40:03.009  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:40:03.014  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:40:03.154  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:40:03.160  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:40:51.424 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:40:58.117  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:40:58.305  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:01.610  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.edit
2020-12-23 17:41:01.748  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:01.871  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:04.566  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:41:04.708  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:09.016  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:41:09.155  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:11.995  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:41:12.128  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:13.735  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 17:41:13.881  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:18.796  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:41:18.929  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:29.080  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 17:41:29.229  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:34.876  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:41:35.009  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:37.220  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 17:41:37.351  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:46.514  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 17:41:46.643  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:41:48.437  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 17:41:48.570  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:42:12.466  INFO 16700 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:12.475  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:42:15.475  WARN 16700 --- [Thread-19] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:42:15.477  INFO 16700 --- [Thread-19] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:15.479  INFO 16700 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2020-12-23 17:42:15.493  INFO 16700 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2020-12-23 17:42:16.425  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:42:18.432  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:42:18.432  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:42:18.434  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:42:18.991  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:42:19.083  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90ms. Found 10 JPA repository interfaces.
2020-12-23 17:42:19.280  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:42:19.297  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:42:19.511  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:42:19.513  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:42:19.514  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:42:19.569  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:42:19.572  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1122 ms
2020-12-23 17:42:19.683  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:42:19.833  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2020-12-23 17:42:19.911  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2020-12-23 17:42:19.941  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:42:20.728  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:42:20.882  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:20.908  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:42:21.687  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:42:21.688  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:21.696  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:42:21.697  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:42:21.697  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:42:21.759  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:42:22.704  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:42:25.622  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:42:27.634  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:42:27.636  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:42:27.639  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:42:28.451  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:42:28.668  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 173ms. Found 10 JPA repository interfaces.
2020-12-23 17:42:28.995  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:42:29.102  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:42:29.695  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:42:29.696  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:42:29.697  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:42:29.874  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 17:42:29.930  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2285 ms
2020-12-23 17:42:30.231  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:42:30.265  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2020-12-23 17:42:30.291  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2020-12-23 17:42:30.291  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:42:31.341  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:42:31.378  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:31.393  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:42:32.647  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:42:32.653  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:32.691  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:42:32.699  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:42:32.702  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:42:32.761  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:42:33.859  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:42:34.284  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 10.474 seconds (JVM running for 1166.781)
2020-12-23 17:42:34.286  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:42:35.062  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:42:35.063  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:42:35.068  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:42:35.205  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:42:35.210  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:42:36.274  INFO 16700 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:36.274  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 17:42:36.305  INFO 16700 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-23 17:42:36.837  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:42:38.844  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:42:38.845  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:42:38.847  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:42:39.229  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:42:39.277  WARN 16700 --- [Thread-35] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:42:39.281  INFO 16700 --- [Thread-35] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:39.286  INFO 16700 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2020-12-23 17:42:39.305  INFO 16700 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2020-12-23 17:42:39.476  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 246ms. Found 10 JPA repository interfaces.
2020-12-23 17:42:40.658  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:42:40.791  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:42:40.792  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:40.801  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:42:41.273  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:42:41.274  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:41.280  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:42:41.281  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:42:41.281  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:42:41.307  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:42:41.811  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:42:42.132  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 6.274 seconds (JVM running for 1174.629)
2020-12-23 17:42:42.136  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:42:42.664  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:42:42.665  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:42:42.667  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:42:42.828  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:42:42.829  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:42:42.834  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 17:42:42.971  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:42:42.979  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:42:43.010  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:42:43.102  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 90ms. Found 10 JPA repository interfaces.
2020-12-23 17:42:43.236  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:42:43.248  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:42:43.523  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:42:43.525  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:42:43.526  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:42:43.641  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:42:43.642  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 971 ms
2020-12-23 17:42:43.790  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:42:43.805  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2020-12-23 17:42:43.826  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2020-12-23 17:42:43.827  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:42:44.594  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:42:44.596  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:44.621  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:42:45.599  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:42:45.600  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:45.624  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:42:45.682  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:42:46.508  WARN 16700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:42:46.510  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:42:46.514  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:42:46.515  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2020-12-23 17:42:46.534  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2020-12-23 17:42:46.535  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:42:46.543  INFO 16700 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:42:46.545 ERROR 16700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:43:12.483 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:43:36.280 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:48:01.642  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:48:03.838  WARN 16700 --- [Thread-45] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:48:03.841  INFO 16700 --- [Thread-45] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:03.848  INFO 16700 --- [Thread-45] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2020-12-23 17:48:03.863  INFO 16700 --- [Thread-45] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2020-12-23 17:48:03.996  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:48:04.002  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:48:04.004  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:48:05.213  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:48:05.268  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:48:05.280  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2020-12-23 17:48:05.297  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2020-12-23 17:48:05.297  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:48:05.870  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:48:05.871  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:05.884  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:48:06.534  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:48:06.535  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:06.545  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:48:06.547  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:48:06.547  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:48:06.581  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:48:07.491  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:48:07.492  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:48:07.493  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:48:07.521  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:48:08.501  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:48:08.748  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 194ms. Found 10 JPA repository interfaces.
2020-12-23 17:48:09.048  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:48:09.086  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:48:09.386  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 9.18 seconds (JVM running for 1501.883)
2020-12-23 17:48:09.455  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:48:09.542  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:48:09.587  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:48:09.702  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:48:09.849  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:48:09.850  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2350 ms
2020-12-23 17:48:09.932  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:48:09.940  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2020-12-23 17:48:09.954  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2020-12-23 17:48:09.955  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:48:10.470  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:48:10.471  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:10.474  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:48:10.475  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:48:10.480  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:48:10.484  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:48:10.615  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:48:10.622  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:48:10.946  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:48:10.947  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:10.957  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:48:11.035  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:48:11.880  WARN 16700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:48:11.882  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:11.884  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:11.885  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2020-12-23 17:48:11.899  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2020-12-23 17:48:11.900  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:48:11.911  INFO 16700 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:48:11.912 ERROR 16700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:48:20.315  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:48:22.328  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:48:22.329  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:48:22.331  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:48:22.401  WARN 16700 --- [Thread-60] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:48:22.405  INFO 16700 --- [Thread-60] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:22.411  INFO 16700 --- [Thread-60] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2020-12-23 17:48:22.420  INFO 16700 --- [Thread-60] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2020-12-23 17:48:28.429  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:48:28.684  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:48:28.686  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:28.696  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:48:28.698  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:48:28.698  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:48:28.746  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:48:29.574  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:48:30.196  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 11.585 seconds (JVM running for 1522.693)
2020-12-23 17:48:30.216  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:48:30.716  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:48:30.717  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:48:30.719  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:48:31.028  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:48:31.028  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:48:31.034  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 17:48:31.174  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:48:31.196  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:48:31.303  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:48:31.415  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 110ms. Found 10 JPA repository interfaces.
2020-12-23 17:48:31.576  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:48:31.587  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:48:31.902  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:48:31.922  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:48:31.925  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:48:32.010  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:48:32.014  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1287 ms
2020-12-23 17:48:32.564  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:48:32.597  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2020-12-23 17:48:32.635  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2020-12-23 17:48:32.639  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:48:34.589  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:48:34.613  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:34.625  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:48:35.681  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:48:35.714  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:35.733  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 17:48:35.803  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:48:37.383  WARN 16700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 17:48:37.385  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:48:37.388  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:48:37.389  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2020-12-23 17:48:37.403  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2020-12-23 17:48:37.408  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 17:48:37.421  INFO 16700 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 17:48:37.427 ERROR 16700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 17:49:00.843 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:49:19.399 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:52:37.617  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:52:39.632  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:52:39.632  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:52:39.634  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:52:39.902  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:52:39.951  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48ms. Found 10 JPA repository interfaces.
2020-12-23 17:52:40.036  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:52:40.480  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:52:40.562  WARN 16700 --- [Thread-75] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:52:40.565  INFO 16700 --- [Thread-75] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:52:40.567  INFO 16700 --- [Thread-75] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2020-12-23 17:52:40.599  INFO 16700 --- [Thread-75] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2020-12-23 17:52:41.884  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:52:43.902  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:52:43.902  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:52:43.904  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:52:44.458  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:52:44.647  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 187ms. Found 10 JPA repository interfaces.
2020-12-23 17:52:44.853  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:52:44.894  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:52:45.200  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:52:45.288  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1376 ms
2020-12-23 17:52:45.462  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:52:45.511  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2020-12-23 17:52:45.664  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2020-12-23 17:52:45.692  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:52:46.293  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:52:46.293  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:52:46.304  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:52:46.951  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:52:46.984  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:52:47.009  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:52:47.010  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:52:47.010  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:52:47.042  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:52:47.690  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:52:48.139  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 7.355 seconds (JVM running for 1780.636)
2020-12-23 17:52:48.163  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:52:48.909  INFO 16700 --- [http-nio-5000-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:52:48.920  INFO 16700 --- [http-nio-5000-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2020-12-23 17:52:49.067  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:52:49.085  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:53:12.261  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.postponeMessage
2020-12-23 17:53:12.475  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:53:15.345  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:53:15.804  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:53:20.358  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:  
2020-12-23 17:53:20.499  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:53:29.680  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 12.12.2020 16:30
2020-12-23 17:53:29.990  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:53:37.569 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:54:16.878  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:54:18.899  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:54:18.900  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:54:18.901  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:54:19.229  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:54:19.291  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61ms. Found 10 JPA repository interfaces.
2020-12-23 17:54:19.408  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:54:19.420  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:54:19.574  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:54:19.613  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 697 ms
2020-12-23 17:54:19.719  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:54:19.729  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Starting...
2020-12-23 17:54:19.757  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Start completed.
2020-12-23 17:54:19.761  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:54:19.777  WARN 16700 --- [Thread-91] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 17:54:19.797  INFO 16700 --- [Thread-91] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:54:19.821  INFO 16700 --- [Thread-91] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2020-12-23 17:54:19.885  INFO 16700 --- [Thread-91] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2020-12-23 17:54:21.116  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 17:54:23.124  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 17:54:23.125  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 17:54:23.126  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 17:54:23.432  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 17:54:23.487  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53ms. Found 10 JPA repository interfaces.
2020-12-23 17:54:23.584  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 17:54:23.592  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 17:54:23.726  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 17:54:23.727  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 17:54:23.728  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 17:54:23.829  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 17:54:23.830  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 686 ms
2020-12-23 17:54:23.932  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 17:54:23.941  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Starting...
2020-12-23 17:54:23.983  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Start completed.
2020-12-23 17:54:23.988  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 17:54:24.370  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 17:54:24.371  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 17:54:24.385  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 17:54:24.751  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 17:54:24.752  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 17:54:24.760  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 17:54:24.763  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 17:54:24.764  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 17:54:24.798  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 17:54:25.324  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 17:54:25.697  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.619 seconds (JVM running for 1878.195)
2020-12-23 17:54:25.701  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 17:54:26.435  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 17:54:26.438  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 17:54:26.450  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2020-12-23 17:54:26.583  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 17:54:26.589  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 17:54:53.592  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:54:53.744  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:53.882  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:55.832  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.managers
2020-12-23 17:54:55.965  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:57.216  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.list
2020-12-23 17:54:57.372  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:57.499  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:57.640  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:54:58.715  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.add
2020-12-23 17:54:58.845  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:01.351  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:55:01.535  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:04.163  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.delete
2020-12-23 17:55:04.295  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:04.419  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:06.564  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:55:06.693  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:07.918  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.changePrivilegies
2020-12-23 17:55:09.368  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 17:55:09.498  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:10.768  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.managersMenu.back
2020-12-23 17:55:10.900  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:12.180  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.clients
2020-12-23 17:55:12.315  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:14.227  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.list
2020-12-23 17:55:15.673  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:15.803  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:16.781 ERROR 16700 --- [threadPoolTaskExecutor-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void by.testbot.services.async.BroadcastServiceAsync.runAsync()

org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:448) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:574) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:361) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at by.testbot.services.PostponeMessageService$$EnhancerBySpringCGLIB$$1dd96078.getAllWithoutLast(<generated>) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.idleMessagesAsync(BroadcastServiceAsync.java:57) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync.runAsync(BroadcastServiceAsync.java:49) ~[classes/:na]
	at by.testbot.services.async.BroadcastServiceAsync$$FastClassBySpringCGLIB$$1ab3ef16.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: java.lang.IllegalStateException: EntityManagerFactory is closed
	at org.hibernate.internal.SessionFactoryImpl.validateNotClosed(SessionFactoryImpl.java:509) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:588) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.hibernate.internal.SessionFactoryImpl.createEntityManager(SessionFactoryImpl.java:156) ~[hibernate-core-5.4.22.Final.jar:5.4.22.Final]
	at org.springframework.orm.jpa.JpaTransactionManager.createEntityManagerForTransaction(JpaTransactionManager.java:466) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:391) ~[spring-orm-5.2.10.RELEASE.jar:5.2.10.RELEASE]
	... 21 common frames omitted

2020-12-23 17:55:18.924  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.clientsMenu.back
2020-12-23 17:55:19.068  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:20.831  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.report
2020-12-23 17:55:20.963  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:22.191  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.aboutManagersWork
2020-12-23 17:55:22.511  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:22.675  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:25.130  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.aboutBotWork
2020-12-23 17:55:25.477  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:25.600  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:27.834  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.reportMenu.back
2020-12-23 17:55:27.965  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:29.568  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.integrations
2020-12-23 17:55:29.706  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:31.808  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.integrationsMenu.back
2020-12-23 17:55:31.970  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:33.315  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 17:55:33.450  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:34.795  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:55:34.935  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:36.628  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.list
2020-12-23 17:55:36.773  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:36.898  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:39.346  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.edit
2020-12-23 17:55:39.483  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:39.607  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:43.086  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:55:43.242  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:45.370  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.showMessageButton
2020-12-23 17:55:45.522  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:45.798  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:47.508  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.editTextButton
2020-12-23 17:55:47.636  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:55:47.770  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:30.210  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: PICTURE
2020-12-23 17:56:37.027  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:56:37.198  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:42.079  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 17:56:42.369  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:42.497  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:45.193  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.listButton
2020-12-23 17:56:45.401  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:45.555  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:50.839  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:56:50.972  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:51.165  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:56:51.295  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:53.470  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.back
2020-12-23 17:56:53.602  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:56.063  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.updateCars
2020-12-23 17:56:56.361  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:56:56.734  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:56.860  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:56:56.992  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:01.725  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.updateCars
2020-12-23 17:57:02.126  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:02.247  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : File message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:04.503  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.back
2020-12-23 17:57:04.632  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:06.292  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.botWork
2020-12-23 17:57:06.436  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:08.537  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:08.664  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:09.748  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:09.887  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:10.851  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 17:57:10.978  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:18.391  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 17:57:18.569  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:20.127  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.editTextsWhichBotSend
2020-12-23 17:57:20.265  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:22.778  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:22.908  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:23.060  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageMenu.edit
2020-12-23 17:57:23.212  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:23.343  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:27.090  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 1
2020-12-23 17:57:27.224  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:31.009  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.listButton
2020-12-23 17:57:31.156  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:31.283  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:33.518  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.botMessageButtonsMenu.back
2020-12-23 17:57:33.661  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:42.169  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received UnsubscribedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:46.865  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received ConversationStartedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:49.937  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:50.831  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:50.831  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : New user registered: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:52.987  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:53.583  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:57:58.733  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:57:59.147  INFO 16700 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:00.835  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:58:01.180  INFO 16700 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:11.014  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:58:11.273  INFO 16700 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:13.492  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 17:58:13.738  INFO 16700 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:16.188  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: Volvo
2020-12-23 17:58:16.502  INFO 16700 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:18.094  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: S60
2020-12-23 17:58:18.508  INFO 16700 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:20.089  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 2016
2020-12-23 17:58:20.312  INFO 16700 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:21.429  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 2018
2020-12-23 17:58:21.715  INFO 16700 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:24.080  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback_yLIaSh
2020-12-23 17:58:24.623  INFO 16700 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:27.619  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 17:58:27.900  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 17:58:28.022  INFO 16700 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:16:35.775  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 18:16:37.796  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 18:16:37.796  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 18:16:37.798  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 18:16:38.017  WARN 16700 --- [Thread-104] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 18:16:38.020  INFO 16700 --- [Thread-104] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:38.022  INFO 16700 --- [Thread-104] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown initiated...
2020-12-23 18:16:38.028  INFO 16700 --- [Thread-104] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown completed.
2020-12-23 18:16:39.206  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 18:16:39.452  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 18:16:39.454  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1648 ms
2020-12-23 18:16:39.604  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 18:16:39.618  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Starting...
2020-12-23 18:16:39.642  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Start completed.
2020-12-23 18:16:39.668  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 18:16:40.470  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 18:16:40.496  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:40.514  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 18:16:41.218  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 18:16:41.219  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 18:16:41.220  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 18:16:41.681  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 18:16:41.708  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:41.738  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 18:16:41.756  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 18:16:41.781  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 18:16:41.870  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 18:16:43.001  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 18:16:43.350  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 320ms. Found 10 JPA repository interfaces.
2020-12-23 18:16:43.584  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 18:16:43.679  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 18:16:44.076  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 18:16:44.108  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 18:16:44.112  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 18:16:44.232  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 18:16:44.233  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3007 ms
2020-12-23 18:16:44.243  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 18:16:44.463  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 18:16:44.475  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Starting...
2020-12-23 18:16:44.566  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Start completed.
2020-12-23 18:16:44.568  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 18:16:45.299  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 10.831 seconds (JVM running for 3217.796)
2020-12-23 18:16:45.304  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 18:16:45.453  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 18:16:45.476  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:45.501  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 18:16:45.942  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 18:16:45.948  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:45.964  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 18:16:46.046  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 18:16:46.053  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 18:16:46.055  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 18:16:46.063  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 18:16:46.230  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 18:16:46.244  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 18:16:46.906  WARN 16700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 18:16:46.908  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:46.911  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:46.912  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown initiated...
2020-12-23 18:16:46.924  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown completed.
2020-12-23 18:16:46.925  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 18:16:46.938  INFO 16700 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 18:16:46.940 ERROR 16700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 18:16:50.355  INFO 16700 --- [Thread-115] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:50.356  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 18:16:51.106  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 18:16:53.112  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 18:16:53.113  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 18:16:53.115  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 18:16:53.357  WARN 16700 --- [Thread-115] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 18:16:53.381  INFO 16700 --- [Thread-115] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:53.385  INFO 16700 --- [Thread-115] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown initiated...
2020-12-23 18:16:53.405  INFO 16700 --- [Thread-115] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown completed.
2020-12-23 18:16:54.522  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 18:16:54.840  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 18:16:54.842  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:54.851  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 18:16:55.195  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 18:16:55.196  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:55.206  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 18:16:55.207  WARN 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 18:16:55.208  INFO 16700 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 18:16:55.238  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 18:16:55.797  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 18:16:56.112  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 5.681 seconds (JVM running for 3228.609)
2020-12-23 18:16:56.115  INFO 16700 --- [restartedMain] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2020-12-23 18:16:56.531  INFO 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 18:16:56.533  WARN 16700 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 18:16:56.535  INFO 16700 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 18:16:56.808  INFO 16700 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 18:16:56.809  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 18:16:56.814  INFO 16700 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2020-12-23 18:16:56.832  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 18:16:56.883  INFO 16700 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49ms. Found 10 JPA repository interfaces.
2020-12-23 18:16:56.952  INFO 16700 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 18:16:56.957  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 18:16:56.973  INFO 16700 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 18:16:56.981  INFO 16700 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 18:16:57.159  INFO 16700 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 18:16:57.160  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 18:16:57.160  INFO 16700 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 18:16:57.209  INFO 16700 --- [restartedMain] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2020-12-23 18:16:57.209  INFO 16700 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 671 ms
2020-12-23 18:16:57.300  INFO 16700 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 18:16:57.310  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Starting...
2020-12-23 18:16:57.332  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Start completed.
2020-12-23 18:16:57.333  INFO 16700 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 18:16:57.751  INFO 16700 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 18:16:57.752  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:57.760  INFO 16700 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 18:16:58.064  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 18:16:58.065  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:58.076  WARN 16700 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2020-12-23 18:16:58.102  WARN 16700 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 18:16:58.656  WARN 16700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 5000 is already in use
2020-12-23 18:16:58.659  INFO 16700 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:16:58.662  INFO 16700 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:16:58.663  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown initiated...
2020-12-23 18:16:58.676  INFO 16700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown completed.
2020-12-23 18:16:58.677  INFO 16700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2020-12-23 18:16:58.694  INFO 16700 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2020-12-23 18:16:58.696 ERROR 16700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 5000 was already in use.

Action:

Identify and stop the process that's listening on port 5000 or configure this application to listen on another port.

2020-12-23 18:17:10.416  INFO 16700 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:17:10.417  INFO 16700 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service stopped: sleep interrupted
2020-12-23 18:17:13.418  WARN 16700 --- [SpringContextShutdownHook] o.s.s.concurrent.ThreadPoolTaskExecutor  : Timed out while waiting for executor 'threadPoolTaskExecutor' to terminate
2020-12-23 18:17:13.420  INFO 16700 --- [SpringContextShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:17:13.432  INFO 16700 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown initiated...
2020-12-23 18:17:13.444  INFO 16700 --- [SpringContextShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown completed.
2020-12-23 18:17:39.501  INFO 11676 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2020-12-23 18:17:42.334  INFO 11676 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2020-12-23 18:17:42.336  WARN 11676 --- [restartedMain] c.c.c.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/application/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2020-12-23 18:17:42.348  INFO 11676 --- [restartedMain] by.testbot.TestbotApplication            : No active profile set, falling back to default profiles: default
2020-12-23 18:17:43.606  INFO 11676 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-23 18:17:43.804  INFO 11676 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 189ms. Found 10 JPA repository interfaces.
2020-12-23 18:17:44.523  INFO 11676 --- [restartedMain] o.s.cloud.context.scope.GenericScope     : BeanFactory id=789fdda0-81f3-31bb-8657-5add9e01a8de
2020-12-23 18:17:44.651  INFO 11676 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'by.testbot.proxy.ViberProxy' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-23 18:17:48.674  INFO 11676 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 5000 (http)
2020-12-23 18:17:48.857  INFO 11676 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-12-23 18:17:48.858  INFO 11676 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.39]
2020-12-23 18:17:49.650  INFO 11676 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-12-23 18:17:49.651  INFO 11676 --- [restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7268 ms
2020-12-23 18:17:50.225  INFO 11676 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-23 18:17:50.892  INFO 11676 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.4.22.Final
2020-12-23 18:17:51.429  INFO 11676 --- [restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-23 18:17:51.548  INFO 11676 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-12-23 18:17:52.718  INFO 11676 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-12-23 18:17:52.806  INFO 11676 --- [restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
2020-12-23 18:17:54.691  INFO 11676 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-23 18:17:54.701  INFO 11676 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-23 18:17:54.766  INFO 11676 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-12-23 18:17:55.974  INFO 11676 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService
2020-12-23 18:17:55.976  INFO 11676 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutor'
2020-12-23 18:17:55.997  WARN 11676 --- [restartedMain] o.s.c.n.a.ArchaiusAutoConfiguration      : No spring.application.name found, defaulting to 'application'
2020-12-23 18:17:56.004  WARN 11676 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 18:17:56.005  INFO 11676 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 18:17:56.011  WARN 11676 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2020-12-23 18:17:56.021  INFO 11676 --- [restartedMain] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-12-23 18:17:56.098  WARN 11676 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-23 18:17:56.976  INFO 11676 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5000 (http) with context path ''
2020-12-23 18:17:57.401  INFO 11676 --- [restartedMain] by.testbot.TestbotApplication            : Started TestbotApplication in 21.254 seconds (JVM running for 23.604)
2020-12-23 18:17:58.663  INFO 11676 --- [http-nio-5000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-23 18:17:58.664  INFO 11676 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-12-23 18:17:58.675  INFO 11676 --- [http-nio-5000-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2020-12-23 18:17:58.892  INFO 11676 --- [restartedMain] by.testbot.services.viber.ViberService   : Webhook setted with response: ok, events: [SUBSCRIBED, UNSUBSCRIBED, CONVERSATION_STARTED, FAILED, MESSAGE]
2020-12-23 18:17:58.900  INFO 11676 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Postpone message service started
2020-12-23 18:18:24.856  INFO 11676 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:   
2020-12-23 18:18:25.586  INFO 11676 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:28.033  INFO 11676 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received UnsubscribedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:32.101  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received ConversationStartedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:34.402  INFO 11676 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 18:18:35.875  INFO 11676 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:35.876  INFO 11676 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : New user registered: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:39.597  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 
2020-12-23 18:18:40.084  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:41.451  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: Acura
2020-12-23 18:18:41.747  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:42.710  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: Integra
2020-12-23 18:18:42.937  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:44.458  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 2016
2020-12-23 18:18:44.822  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:46.183  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 2018
2020-12-23 18:18:46.595  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:48.409  INFO 11676 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback_yLIaSh
2020-12-23 18:18:48.742  INFO 11676 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:53.518  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 18:18:53.747  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:53.886  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:58.295  INFO 11676 --- [http-nio-5000-exec-5] by.testbot.services.viber.ViberService   : Received UnsubscribedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:18:58.985  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received ConversationStartedCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:02.901  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: MANAGER
2020-12-23 18:19:03.306  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:03.457  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:03.458  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : New user registered: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:06.266  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: MANAGER
2020-12-23 18:19:06.410  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:07.558  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: MANAGER
2020-12-23 18:19:07.713  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:10.843  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: CONTACT
2020-12-23 18:19:10.990  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:11.139  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:14.199  INFO 11676 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.postponeMessage
2020-12-23 18:19:14.360  INFO 11676 --- [http-nio-5000-exec-1] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:17.189  INFO 11676 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: Jdjdjsjs
2020-12-23 18:19:17.469  INFO 11676 --- [http-nio-5000-exec-2] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:19.684  INFO 11676 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:  
2020-12-23 18:19:19.853  INFO 11676 --- [http-nio-5000-exec-3] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:19:29.514  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 23.12.2020 18:31
2020-12-23 18:19:29.815  INFO 11676 --- [http-nio-5000-exec-4] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:01.609  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 18:20:01.766  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:01.931  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:03.544  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.postponeMessage
2020-12-23 18:20:03.688  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:13.539  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 23.12.2020 18:25
2020-12-23 18:20:13.860  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:15.179  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text:  
2020-12-23 18:20:15.349  INFO 11676 --- [http-nio-5000-exec-9] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:25.581  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: 23.12.2020 21:30
2020-12-23 18:20:25.920  INFO 11676 --- [http-nio-5000-exec-10] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:37.537  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.confirm
2020-12-23 18:20:37.698  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:37.839  INFO 11676 --- [http-nio-5000-exec-6] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:43.368  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.adminMainMenu.settings
2020-12-23 18:20:43.559  INFO 11676 --- [http-nio-5000-exec-7] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:20:44.925  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Received MessageCallback from user: gbcD9ezHUeQkbrYUwyU3Bw==, message type: TEXT, with text: callback.settings.back
2020-12-23 18:20:45.079  INFO 11676 --- [http-nio-5000-exec-8] by.testbot.services.viber.ViberService   : Text message sended to user: gbcD9ezHUeQkbrYUwyU3Bw==
2020-12-23 18:31:59.830  INFO 11676 --- [threadPoolTaskExecutor-1] by.testbot.services.viber.ViberService   : Broadcast text message sended.
2020-12-23 18:31:59.831  INFO 11676 --- [threadPoolTaskExecutor-1] b.t.s.async.BroadcastServiceAsync        : Message not sended to gbcD9ezHUeQkbrYUwyU3Bw==2. Status: OTHER, reason: Failed sending message
